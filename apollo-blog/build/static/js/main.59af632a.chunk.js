(this["webpackJsonpapollo-blog"]=this["webpackJsonpapollo-blog"]||[]).push([[0],{129:function(e,t,a){e.exports=a(262)},25:function(e,t,a){},262:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),o=a.n(l),s=a(6),c=a(7),i=a(10),u=a(8),m=a(9),d=a(18),h=a(11),p=(a(138),a(264)),g=a(12),E=a.n(g),f="http://127.0.0.1:8000/api/",b=function(e){return f+"article/"+e+"/"},w=function(e,t,a){return{type:"AUTH_SUCCESS",token:e,username:t,user_id:a}},v=function(e){return{type:"AUTH_FAIL",error:e}},_=function(e){return function(t){setTimeout((function(){t({type:"AUTH_LOGOUT"})}),1e3*e)}},y=a(15),S=a(270),k=a(271),O=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=(t.error,t.loading,t.authenticated),n=t.username;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{expand:"lg",variant:"light",bg:"light"},r.a.createElement(S.a.Brand,{onClick:function(){return e.props.history.push("/")},style:{cursor:"pointer"}},r.a.createElement("h4",{className:"verdana-font"},"Apollo")),r.a.createElement(S.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(S.a.Collapse,{className:"justify-content-end ",id:"basic-navbar-nav"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Link,{href:"/profile"},"Hello, ",n,"!"),r.a.createElement(k.a.Link,{onClick:function(){return e.props.logout()}},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Link,{href:"/login"},"Login"),r.a.createElement(k.a.Link,{href:"/signup"},"Signup")))),r.a.createElement("br",null))}}]),t}(r.a.Component),C=Object(y.f)(Object(h.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,authenticated:null!==e.auth.token,username:e.auth.username}}),(function(e){return{logout:function(t){return e((function(e){localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("username"),localStorage.removeItem("staff"),localStorage.removeItem("user_id"),e({type:"AUTH_LOGOUT"})}))}}}))(O));a(25);var j=function(){return r.a.createElement(p.a,{className:"footer"},"\xa9 ",(new Date).getFullYear(),"- Apollo -",r.a.createElement("a",{href:""}," Legal "),"-",r.a.createElement("a",{href:""}," Privacy "),"-",r.a.createElement("a",{href:""}," Careers "))},A=function(e){return e.children},T=a(266),x=a(121),N=a(275),P=a(268),F=a(276),D=a(269),I=a(267);var L=function(){return r.a.createElement("svg",{width:"29",height:"29",class:"q"},r.a.createElement("path",{d:"M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"}))};var U=function(){return r.a.createElement("svg",{width:"29",height:"29",class:"q"},r.a.createElement("path",{d:"M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"}))},B=a(273),z=a(272),V=a(69),H=a(265);var q=function(){return r.a.createElement(H.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))},G=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:null,loading:!1,email:"",email_submitted:null},a.handlePostEmail=function(){a.setState({loading:!0,error:null});var e=new FormData;e.append("email",a.state.email),E.a.post("http://127.0.0.1:8000/api/create-email/",e).then((function(e){a.setState({email_submitted:!0,loading:!1})})).catch((function(e){a.setState({error:e.response.data,loading:!1})}))},a.handleEmailValidated=function(){var e=a.state.email,t=e.length>5,n=e.includes("@"),r=e.includes(".");return!(t&&n&&r)},a.handleEmail=function(e){a.setState({email:e.target.value})},a.handleClosePopover=function(){alert("blurred"),document.getElementById("emailBadge").click()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.loading,n=e.email_submitted,l=r.a.createElement(B.a,{id:"popover-basic",className:"max-width-800px"},r.a.createElement(B.a.Title,{as:"h3"},"Email Updates"),r.a.createElement(B.a.Content,null,r.a.createElement(T.a,null,r.a.createElement(x.a,null,r.a.createElement(D.a.Control,{className:"width-250px",type:"email",placeholder:"Enter email",onChange:this.handleEmail}),t&&r.a.createElement("small",{style:{color:"red"}},t)),r.a.createElement(x.a,null,n?r.a.createElement(V.a,{className:"text-success font-size-2-5em"}):a?r.a.createElement(I.a,{disabled:!0,variant:"primary",type:"submit",onClick:this.handlePostEmail,className:"float-right"},r.a.createElement(q,null)):r.a.createElement(I.a,{disabled:this.handleEmailValidated(),variant:"primary",type:"submit",onClick:this.handlePostEmail,className:"float-right"},"Submit")))));return r.a.createElement(z.a,{trigger:"click",placement:this.props.direction,overlay:l},r.a.createElement(P.a,{id:"emailBadge",className:"font-size-10px",style:{cursor:"pointer"}},this.props.text))}}]),t}(r.a.Component);var R=function(e){var t="";return e.classes&&(t=e.classes),r.a.createElement("div",{className:t,dangerouslySetInnerHTML:{__html:e.text}})},M=a(274),Y=a(68),W=a.n(Y),J=(a(114),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:null,loading:null,commenter_name:"",comment_body:"",comment_submitted:!1},a.handleCommentBody=function(e){a.setState({comment_body:e})},a.handleCommenterName=function(e){a.setState({commenter_name:e.target.value})},a.handlePostComment=function(){a.setState({loading:!0});var e=new FormData;e.append("body",a.state.comment_body),e.append("author",a.state.commenter_name),e.append("article",a.props.article_id),E.a.post("http://127.0.0.1:8000/api/create-comment/",e).then((function(e){console.log("comment submitted"),a.setState({loading:!1,commenter_name:"",comment_body:"",comment_submitted:!0})})).catch((function(e){a.setState({error:e.response.data,loading:!1})}))},a.handleValidateComment=function(){return!(a.state.comment_body.length>1&&a.state.commenter_name.length>1)},a.handleUpvote=function(e,t,a){console.log("upvote");for(var n=0;n<a.upvotes.length;n++)if(console.log(a.upvotes[n].user),a.upvotes[n].user===t){!0;break}var r=new FormData;r.append("comment",e),r.append("user",t)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=(t.error,t.comment_body),l=t.commenter_name,o=t.comment_submitted,s=this.props,c=s.comments,i=s.user_id;return console.log(c),r.a.createElement("div",null,r.a.createElement("h1",{className:"tahoma-font"},"Article Comments"),r.a.createElement("hr",null),r.a.createElement(p.a,null,c?c.map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,null,r.a.createElement(M.a.Body,null,r.a.createElement(M.a.Title,null,t.author),r.a.createElement(M.a.Subtitle,{className:"mb-2 text-muted"},new Date(t.created_date).toDateString()),r.a.createElement(M.a.Text,null,r.a.createElement(R,{text:t.body})),r.a.createElement(P.a,{onClick:function(){return e.handleUpvote(t.id,i,t)},style:{cursor:"pointer"}},"Upvote"),r.a.createElement(P.a,null,t.upvotes.length),r.a.createElement("br",null),r.a.createElement(P.a,{onClick:function(a,n){return e.handleUpvote(t.id)},style:{cursor:"pointer"}},"Downvote"))),r.a.createElement("hr",null))})):r.a.createElement(F.a,{variant:"dark"},"There are no comments yet! Leave one below"),r.a.createElement(M.a,null,r.a.createElement(M.a.Header,null,r.a.createElement("h3",null,"Add a Comment")),r.a.createElement(M.a.Body,null,r.a.createElement(M.a.Text,null,r.a.createElement(D.a,null,r.a.createElement(D.a.Row,null,r.a.createElement(D.a.Label,null,"Name:"),r.a.createElement(D.a.Control,{type:"text",placeholder:"Enter Name",value:l,onChange:this.handleCommenterName})),r.a.createElement("br",null),r.a.createElement(D.a.Row,null,r.a.createElement(x.a,null,r.a.createElement(D.a.Label,null,"Comment:"),r.a.createElement(W.a,{placeholder:"Start Writing...",onChange:this.handleCommentBody,value:n}))))),a?r.a.createElement(I.a,{disabled:!0,variant:"primary"},r.a.createElement(q,null)):r.a.createElement(I.a,{onClick:this.handlePostComment,disabled:this.handleValidateComment(),variant:"primary"},"Add Comment"))),r.a.createElement("br",null),o&&r.a.createElement(F.a,{variant:"success"},"You successfully added a comment!")))}}]),t}(r.a.Component)),X=Object(h.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,authenticated:null!==e.auth.token,user_id:e.auth.user_id}}))(J),$=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,error:null,article_data:[]},a.handleGetArticle=function(){var e=a.props.match.params.article_id;E.a.get(b(e)).then((function(e){a.setState({loading:!1,article_data:e.data})})).catch((function(e){a.setState({error:e,loading:!1})}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({loading:!0}),this.handleGetArticle()}},{key:"render",value:function(){var e=this,t=this.state,a=t.article_data,n=t.loading,l=this.props.authenticated,o=new Date(a.created_date).toDateString(),s=document.getElementById("apollo_widget_left_sidebar"),c=document.getElementById("sm_links_left_sidebar");document.getElementsByTagName("body")[0].onscroll=function(e){document.documentElement.scrollTop>=70?s.classList.add("AfterScroll"):s.classList.remove("AfterScroll"),document.documentElement.scrollTop>=225?c.classList.add("AfterScroll"):c.classList.remove("AfterScroll")};var i="https://twitter.com/intent/tweet?text=check%20out%20this%20new%20cryptocurrency%20startup!%20https%3A%2F%2Flocalhost%3A3000%2Fblog%2Farticle%2F"+a.id,u="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flocalhost%3A3000%2Fblog%2Farticle%2F"+a.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement(T.a,null,r.a.createElement(x.a,{xs:2},r.a.createElement(N.a,{variant:"flush",className:"sticky-top BeforeScroll"},r.a.createElement("div",{id:"apollo_widget_left_sidebar"},r.a.createElement(N.a.Item,null,r.a.createElement("h4",{className:"verdana-font",onClick:function(){return e.props.history.push("/")},style:{cursor:"pointer"}},"Apollo")),!l&&r.a.createElement(N.a.Item,null,r.a.createElement(d.b,{to:"/signup",className:"article-link"},r.a.createElement(P.a,null,"Create an account")),r.a.createElement(G,{text:"Get email updates",direction:"right"}))),r.a.createElement(N.a.Item,null,r.a.createElement("div",{id:"sm_links_left_sidebar"},r.a.createElement("a",{href:i},r.a.createElement(L,null)),r.a.createElement("a",{href:u},r.a.createElement(U,null)))))),r.a.createElement(x.a,{xs:8},n?r.a.createElement(q,null):r.a.createElement(r.a.Fragment,null,a?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"times-new-roman-font"},a.title),r.a.createElement("h6",{className:"padding-left-10px"},"By ",a.author," ",r.a.createElement(P.a,null,o),r.a.createElement("div",{className:"float-right"},r.a.createElement("a",{href:i},r.a.createElement(L,null)),r.a.createElement("a",{href:u},r.a.createElement(U,null)))),r.a.createElement("hr",null),r.a.createElement(R,{text:a.body,classes:"times-new-roman-font"})):r.a.createElement(F.a,{variant:"dark"},"There was an issue loading this article"),r.a.createElement("br",null),!l&&r.a.createElement("div",{style:{backgroundColor:"lightgrey",paddingTop:"8px",paddingBottom:"3px",paddingLeft:"8px",borderRadius:"4px"}},r.a.createElement("text",null,"Like what you see? Subscribe for updates on our website"),r.a.createElement(D.a,null,r.a.createElement(D.a.Row,null,r.a.createElement(x.a,null,r.a.createElement(D.a.Control,{type:"email",placeholder:"Enter email"})),r.a.createElement(x.a,null,r.a.createElement(I.a,{variant:"primary",type:"submit"},"Submit"))),r.a.createElement("small",null,"We will never sell your information ")),r.a.createElement("br",null)),r.a.createElement(X,{comments:a.comments,article_id:this.props.match.params.article_id}))))))}}]),t}(r.a.Component),K=Object(h.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,authenticated:null!==e.auth.token}}))($),Q=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:null,loading:!0,articles:[],pinned_article:null},a.handleGetArticles=function(){E.a.get("http://127.0.0.1:8000/api/all-articles/").then((function(e){var t=e.data,n=[];for(var r in t)if(e.data[r].pinned){n.id=t[r].id,n.title=t[r].title,n.author=t[r].author,n.created_date=t[r].created_date,n.body=t[r].body.substring(0,500);break}a.setState({loading:!1,articles:e.data,pinned_article:n})})).catch((function(e){a.setState({error:e,loading:!1})}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({loading:!0}),this.handleGetArticles()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=(e.error,e.articles),n=e.pinned_article,l=this.props,o=l.authenticated,s=l.token;return console.log(a),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement(T.a,null,r.a.createElement(x.a,{sm:{span:4}},r.a.createElement("h1",{className:"verdana-font"},"The Apollo Blog")),r.a.createElement(x.a,{sm:{offset:9}},o?"8582b323219d80196bb1e017411808a67fe70365"===s&&r.a.createElement("div",{className:"float-right"},r.a.createElement(d.b,{to:"/create-article"},r.a.createElement(I.a,{variant:"outline-secondary"},"Write an Article "))):r.a.createElement("div",{className:"float-right"},r.a.createElement(G,{text:"Sign up for email updates",direction:"left"}))))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(N.a,{variant:"flush"},null!==n&&r.a.createElement(N.a.Item,null,r.a.createElement(d.b,{to:"blog/article/"+n.id,className:"article-link"},r.a.createElement(M.a,{className:"width-100-percent margin-bottom-75px",id:n.id},r.a.createElement(M.a.Body,null,r.a.createElement(M.a.Title,null,n.title," ",r.a.createElement(V.b,{color:"royalblue",className:"float-right font-size-1-25em"})),r.a.createElement(M.a.Subtitle,{className:"mb-2 text-muted"},"By ",r.a.createElement("a",{href:"#"},n.author)," ",r.a.createElement(P.a,null,new Date(n.created_date).toDateString()," ")),r.a.createElement(M.a.Text,null,r.a.createElement(R,{text:n.body+"..."})))))),!0===t?r.a.createElement(q,null):a.length>0?a.map((function(e){return r.a.createElement(N.a.Item,null,r.a.createElement(d.b,{to:"blog/article/"+e.id,className:"article-link"},r.a.createElement(M.a,{className:"width-100-percent",id:e.id},r.a.createElement(M.a.Body,null,r.a.createElement(M.a.Title,null,e.title),r.a.createElement(M.a.Subtitle,{className:"mb-2 text-muted"},"By ",r.a.createElement("a",{href:"#"},e.author)," ",r.a.createElement(P.a,null,new Date(e.created_date).toDateString()," ")),r.a.createElement(M.a.Text,null,r.a.createElement(R,{text:e.body.substring(0,200)+"..."}))))))})):r.a.createElement(F.a,{variant:"dark"},"There was an error retrieving our articles")))}}]),t}(r.a.Component),Z=Object(h.b)((function(e){return{token:e.auth.token,authenticated:null!==e.auth.token}}))(Q),ee=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:null,loading:!1,author:"",title:"",body:"",article_submitted:!1,countdown:3},a.handleAuthor=function(e){a.setState({author:e.target.value})},a.handleTitle=function(e){a.setState({title:e.target.value})},a.handleBody=function(e){a.setState({body:e})},a.submitForm=function(){var e=new FormData;e.append("author",a.props.username),e.append("title",a.state.title),e.append("body",a.state.body),E.a.post("http://127.0.0.1:8000/api/create-article/",e,{headers:{Authorization:"Token "+a.props.token}}).then((function(e){a.setState({article_submitted:!0}),console.log(e.data)})).catch((function(e){console.log(e),a.setState({error:e,loading:!1})}))},a.countdown=function(e){e-=1,a.setState({countdown:e})},a.handleValidated=function(){return!(a.state.title.length>1&&a.state.body.length>1)},a.modules={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},a.formats=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"],a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({author:this.props.username,loading:!1})}},{key:"render",value:function(){var e=this.state,t=(e.author,e.title,e.body,e.article_submitted),a=e.countdown,n=e.error,l=this.props,o=l.authenticated;l.token;return r.a.createElement(p.a,null,r.a.createElement(T.a,null,r.a.createElement(x.a,{xs:2}),r.a.createElement(x.a,{xs:8},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,null,r.a.createElement(M.a.Header,null,r.a.createElement("h3",null,"Add an Article")),r.a.createElement(M.a.Body,null,r.a.createElement(M.a.Text,null,r.a.createElement(D.a,null,r.a.createElement("br",null),r.a.createElement(D.a.Row,null,r.a.createElement(D.a.Label,null,"Article Title:"),r.a.createElement(D.a.Control,{required:!0,type:"text",placeholder:"Enter Name",onChange:this.handleTitle})),r.a.createElement("br",null),r.a.createElement(D.a.Row,null,r.a.createElement(x.a,null,r.a.createElement(D.a.Label,null,"Article Body:"),r.a.createElement(W.a,{required:!0,placeholder:"Start Writing...",onChange:this.handleBody,className:"editor_form_control",modules:this.modules,formats:this.formats,theme:"snow"}))))),r.a.createElement("br",null),r.a.createElement(I.a,{variant:"primary",onClick:this.submitForm,disabled:this.handleValidated()},"Add Article"))),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("meta",{"http-equiv":"refresh",content:"3;url=/"}),r.a.createElement(F.a,{variant:"danger"},"Nice try buddy")),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("meta",{"http-equiv":"refresh",content:"3;url=/"}),r.a.createElement(F.a,{variant:"success"},"You successfully created an article! You will be redirected in ",a," seconds"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{variant:"danger"},"How did you get here? oops. ",r.a.createElement("a",{href:"/"},"go home"))))))}}]),t}(r.a.Component),te=Object(y.f)(Object(h.b)((function(e){return console.log(e.auth.token),{loading:e.auth.loading,error:e.auth.error,token:e.auth.token,username:e.auth.username,authenticated:null!==e.auth.token}}))(ee)),ae=a(122),ne=a(123),re=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handleUsername=function(e){a.setState({username:e.target.value})},a.handlePassword=function(e){a.setState({password:e.target.value})},a.validateForm=function(){return console.log(a.state.email.length),console.log(a.state.email.length>0&&a.state.password.length>8),a.state.email.length>0&&a.state.password.length>8},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;a.props.login(n,r)},a.handleValidated=function(){return a.state.username.length>1&&a.state.password.length>1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.error,a=(e.loading,e.token),n=this.state,l=n.username,o=n.password;if(a)return r.a.createElement(y.a,{to:"/"});if(t)var s=t.response.data;return r.a.createElement("div",{className:"account-form"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h3",null,"Login "),r.a.createElement("hr",null),r.a.createElement(ae.a,{controlId:"email",bsSize:"large"},"Username",r.a.createElement(ne.a,{required:!0,autoFocus:!0,value:l,onChange:this.handleUsername})),r.a.createElement(ae.a,{controlId:"password",bsSize:"large"},"Password",r.a.createElement(ne.a,{required:!0,value:o,onChange:this.handlePassword,type:"password"})),r.a.createElement(I.a,{block:!0,bsSize:"large",disabled:!this.handleValidated(),type:"submit"},"Login"),r.a.createElement(P.a,null," New to Apollo? ",r.a.createElement(d.c,{to:"/signup"},"Sign Up")," "),r.a.createElement("br",null),r.a.createElement(P.a,null," ",r.a.createElement(d.c,{to:"/reset-password"},"Forgot your password? ")," "),r.a.createElement("br",null),t&&r.a.createElement(F.a,{variant:"danger"},Object.keys(s).map((function(e){return r.a.createElement("li",null,s[e][0])})))))}}]),t}(r.a.Component),le=Object(y.f)(Object(h.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,token:e.auth.token}}),(function(e){return{login:function(t,a){return e(function(e,t){return function(a){a({type:"AUTH_START"}),E.a.post("http://127.0.0.1:8000/api/login/",{username:e,password:t}).then((function(t){var n=t.data.key,r=t.data.user_id,l=new Date((new Date).getTime()+36e5);localStorage.setItem("user_id",r),localStorage.setItem("username",e),localStorage.setItem("token",n),localStorage.setItem("expirationDate",l),a(w(n,e,r)),a(_(1e4))})).catch((function(e){a(v(e))}))}}(t,a))}}}))(re)),oe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:null,error:null,email:"",username:"",password:"",confirm_password:"",passwords_match:!0},a.handleEmail=function(e){a.setState({email:e.target.value})},a.handleUsername=function(e){a.setState({username:e.target.value})},a.handlePassword=function(e){a.state.confirm_password!==e.target.value?a.setState({passwords_match:!1,password:e.target.value}):a.setState({passwords_match:!0,password:e.target.value})},a.handleConfirmPassword=function(e){a.state.password!==e.target.value?a.setState({passwords_match:!1,confirm_password:e.target.value}):a.setState({passwords_match:!0,confirm_password:e.target.value})},a.handleValidated=function(){var e=a.state.email.length>0,t=a.state.username.length>0,n=a.state.password.length>8,r=a.state.confirm_password.length>8,l=a.state.password_valid===a.state.confirm_password_valid;return e&&t&&n&&r&&l&&a.state.passwords_match},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,r=t.username,l=t.password,o=t.confirm_password;console.log(n),a.props.signup(r,n,l,o)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.username,n=e.password,l=e.confirm_password,o=e.passwords_match,s=this.props.error;if(s)var c=s.response.data;return console.log("error: ",s),r.a.createElement("div",{className:"account-form"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h3",null,"Signup "),r.a.createElement("hr",null),r.a.createElement(ae.a,{controlId:"email",bsSize:"large"},"Email",r.a.createElement(ne.a,{required:!0,autoFocus:!0,type:"email",value:t,onChange:this.handleEmail})),r.a.createElement(ae.a,{controlId:"username",bsSize:"large"},"Username",r.a.createElement(ne.a,{required:!0,value:a,onChange:this.handleUsername})),r.a.createElement(ae.a,{controlId:"password",bsSize:"large"},"Password",r.a.createElement(ne.a,{required:!0,value:n,onChange:this.handlePassword,type:"password"})),r.a.createElement(ae.a,{controlId:"confirm_password",bsSize:"large"},"Confirm Password",r.a.createElement(ne.a,{required:!0,value:l,onChange:this.handleConfirmPassword,type:"password"})),r.a.createElement(I.a,{block:!0,bsSize:"large",disabled:!this.handleValidated(),type:"submit"},"Signup"),r.a.createElement(P.a,null," Already have an account? ",r.a.createElement(d.c,{to:"/login"},"Login ")," "),!o&&r.a.createElement(F.a,{variant:"danger"},"Your passwords must match"),s&&r.a.createElement(F.a,{variant:"danger"},Object.keys(c).map((function(e){return r.a.createElement("li",null,c[e][0])})))))}}]),t}(r.a.Component),se=Object(h.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,token:e.auth.token}}),(function(e){return{signup:function(t,a,n,r){return e(function(e,t,a,n){return function(r){r({type:"AUTH_START"}),E.a.post("http://127.0.0.1:8000/api/signup/",{username:e,email:t,password1:a,password2:n}).then((function(t){var a=t.data.key,n=new Date((new Date).getTime()+864e5);localStorage.setItem("token",a),localStorage.setItem("expirationDate",n),r(w(a,e,!1)),r(_(3600))})).catch((function(e){r(v(e))}))}}(t,a,n,r))}}}))(oe),ce=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:null,loading:!1,old_password:"",new_password1:"",new_password2:"",reset_password:null},a.handleOldPassword=function(e){console.log("old password :"+e.target.value),a.setState({old_password:e.target.value})},a.handlePassword=function(e){console.log("new password 1 :"+e.target.value),a.setState({new_password1:e.target.value})},a.handleConfirmPassword=function(e){console.log("new password 2 :"+e.target.value),a.setState({new_password2:e.target.value})},a.handleChangePassword=function(){a.setState({loading:!0});var e=new FormData;e.append("new_password1",a.state.new_password1),e.append("new_password2",a.state.new_password2),e.append("old_password",a.state.old_password);var t=!0,n=!1,r=void 0;try{for(var l,o=e.values()[Symbol.iterator]();!(t=(l=o.next()).done);t=!0){var s=l.value;console.log("value: "+s)}}catch(i){n=!0,r=i}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}var c="Token "+a.props.token;E.a.post("http://127.0.0.1:8000/rest-auth/password/change/",e,{headers:{Authorization:c}}).then((function(e){console.log("response: "+e.data),a.setState({loading:!1,error:null,reset_password:e.data.detail})})).catch((function(e){console.log("error: "+e.response.data),a.setState({loading:!1,error:e.response.data})}))},a.handleValidated=function(){return a.state.old_password.length>1&&a.state.new_password2.length>1&&a.state.new_password1.length>1&&a.state.new_password2==a.state.new_password1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.loading,n=(e.new_password1,e.new_password2,e.old_password,e.reset_password);this.props.token;return r.a.createElement(p.a,null,r.a.createElement("h5",null,"Change Your Password"),r.a.createElement("hr",null),r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Old Password"),r.a.createElement(D.a.Control,{type:"password",placeholder:"Enter old password",onChange:this.handleOldPassword})),r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"New Password"),r.a.createElement(D.a.Control,{type:"password",placeholder:"New Password",onChange:this.handlePassword})),r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Confirm New Password"),r.a.createElement(D.a.Control,{type:"password",placeholder:"Confirm Password",onChange:this.handleConfirmPassword})),a?r.a.createElement(I.a,{block:!0,bsSize:"large",disabled:!this.handleValidated(),onClick:this.handleChangePassword},r.a.createElement(q,null)):r.a.createElement(I.a,{block:!0,bsSize:"large",disabled:!this.handleValidated(),onClick:this.handleChangePassword},"Change Your Password"),r.a.createElement("br",null),r.a.createElement("br",null),n&&r.a.createElement(F.a,{variant:"success"},n),t&&r.a.createElement(F.a,{variant:"danger"},Object.keys(t).map((function(e){return r.a.createElement("li",null,t[e][0])}))))}}]),t}(r.a.Component),ie=Object(h.b)((function(e){return{token:e.auth.token}}))(ce),ue=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={error:null,loading:!0,account_info:[],selected_button:"info"},a.handleGetAccount=function(){a.setState({loading:!0}),console.log("username: "+a.props.username);var e=new FormData;e.append("username","connordavidson"),e.append("first_name","Connor"),e.append("last_name","Davidson"),E.a.get("http://127.0.0.1:8000/rest-auth/user/",e,{headers:{Authorization:"Token "+a.props.token}}).then((function(e){console.log("response: "+e),a.setState({loading:!1})})).catch((function(e){console.log("error: "+e),a.setState({loading:!1})}))},a.handleChangePassword=function(){a.setState({loading:!0}),console.log("handle change password with hardcoded data");var e=new FormData;e.append("new_password1","password_11"),e.append("new_password2","password_11"),e.append("old_password","password_1"),E.a.post("http://127.0.0.1:8000/rest-auth/password/change/",e,{headers:{Authorization:"Token "+a.props.token}}).then((function(e){console.log("response: "+e),a.setState({loading:!1})})).catch((function(e){console.log("error: "+e)}))},a.handleProfileInfo=function(){switch(a.state.selected_button){case"info":return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,null));case"email_preferences":return r.a.createElement(p.a,null,r.a.createElement("h5",null,"Change Your Email Preferences"),r.a.createElement("hr",null),r.a.createElement(D.a.Check,{type:"checkbox",label:"New product alerts"}),r.a.createElement("br",null),r.a.createElement(D.a.Check,{type:"checkbox",label:"Updates on the progress of our website"}),r.a.createElement("br",null),r.a.createElement(D.a.Check,{type:"checkbox",label:"Hot Deals"}));default:return r.a.createElement("h5",null,"default case")}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log("token: "+this.props.token),this.setState({loading:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=(t.error,t.loading,t.account_info,t.selected_button),n=this.props,l=n.username,o=n.authenticated,s=n.token;return console.log("username: "+l),console.log("token: "+s),console.log(a),r.a.createElement(r.a.Fragment,null,o?r.a.createElement(p.a,null,r.a.createElement("h4",null,"Account info for ",l),r.a.createElement(T.a,null,r.a.createElement(x.a,{sm:{span:3}},r.a.createElement(M.a,null,r.a.createElement(N.a,{variant:"flush"},r.a.createElement(N.a.Item,{active:"info"===a,onClick:function(){e.setState({selected_button:"info"})},style:{cursor:"pointer"}},"Account Info"),r.a.createElement(N.a.Item,{active:"email_preferences"===a,onClick:function(){e.setState({selected_button:"email_preferences"})},style:{cursor:"pointer"}},"Email Preferences")))),r.a.createElement(x.a,{sm:{span:6}},this.handleProfileInfo()))):r.a.createElement("h5",null,"how'd you get here??"))}}]),t}(r.a.Component),me=Object(y.f)(Object(h.b)((function(e){return{username:e.auth.username,token:e.auth.token,authenticated:null!==e.auth.token}}))(ue)),de=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,error:null,email:"",email_submitted:null,message:null},a.handleEmail=function(e){console.log(e.target.value),a.setState({email:e.target.value})},a.handleValidated=function(){return!(a.state.email.length>1)},a.handleSubmit=function(){a.setState({loading:!0});var e=new FormData;e.append("email",a.state.email),E.a.post("http://127.0.0.1:8000/api/password-reset/",e).then((function(e){console.log(e),a.setState({email_submitted:!0,loading:!1,message:e.data.message})})).catch((function(e){console.log(e),a.setState({error:e.response.data,loading:!1})}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.loading,a=(e.error,e.email),n=e.email_submitted,l=e.message;return r.a.createElement("div",{className:"account-form"},r.a.createElement("h3",null,"Reset Password "),r.a.createElement("hr",null),r.a.createElement(ae.a,{controlId:"email",bsSize:"large"},"Email",r.a.createElement(ne.a,{required:!0,autoFocus:!0,value:a,onChange:this.handleEmail})),t?r.a.createElement(I.a,{block:!0,bsSize:"large",disabled:!0},r.a.createElement(q,null)):r.a.createElement(I.a,{block:!0,bsSize:"large",disabled:this.handleValidated(),onClick:this.handleSubmit},"Submit"),r.a.createElement("br",null),n&&r.a.createElement(F.a,{variant:"success"},l))}}]),t}(r.a.Component),he=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,error:null,password:"",confirm_password:"",passwords_match:!0,success_message:""},a.handlePassword=function(e){a.state.confirm_password!==e.target.value?a.setState({passwords_match:!1,password:e.target.value}):a.setState({passwords_match:!0,password:e.target.value})},a.handleConfirmPassword=function(e){a.state.password!==e.target.value?a.setState({passwords_match:!1,confirm_password:e.target.value}):a.setState({passwords_match:!0,confirm_password:e.target.value})},a.handleValidated=function(){var e=a.state.password.length>8,t=a.state.confirm_password.length>8,n=a.state.password_valid===a.state.confirm_password_valid;return e&&t&&n&&a.state.passwords_match},a.handleSubmit=function(e){a.setState({loading:!0}),e.preventDefault();var t=a.props.match.params.uid,n=a.props.match.params.token;console.log(t+" : "+n);var r=new FormData;r.append("new_password1",a.state.password),r.append("new_password2",a.state.confirm_password),r.append("uid",t),r.append("token",n),E.a.post("http://127.0.0.1:8000/rest-auth/password/reset/confirm/",r).then((function(e){console.log(e),a.setState({loading:!0,success_message:e.data.detail})})).catch((function(e){console.log(e),a.setState({loading:!1,error:e.response.data})}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.error,a=(e.loading,e.password),n=e.confirm_password,l=e.passwords_match,o=e.success_message;return r.a.createElement("div",{className:"account-form"},r.a.createElement("form",null,r.a.createElement("h5",null,"Enter New Password "),r.a.createElement(ae.a,{controlId:"password",bsSize:"large"},"Password",r.a.createElement(ne.a,{required:!0,value:a,onChange:this.handlePassword,type:"password"})),r.a.createElement(ae.a,{controlId:"confirm_password",bsSize:"large"},"Confirm Password",r.a.createElement(ne.a,{required:!0,value:n,onChange:this.handleConfirmPassword,type:"password"})),r.a.createElement(I.a,{block:!0,bsSize:"large",disabled:!this.handleValidated(),onClick:this.handleSubmit},"Change Password"),r.a.createElement("br",null),!l&&r.a.createElement(F.a,{variant:"danger"},"Your passwords must match"),o&&r.a.createElement(F.a,{variant:"success"},o),t&&r.a.createElement(F.a,{variant:"danger"},Object.keys(t).map((function(e){return r.a.createElement("li",null,t[e][0])})))))}}]),t}(r.a.Component),pe=function(){return r.a.createElement(A,null,r.a.createElement(y.b,{exact:!0,path:"/"},r.a.createElement(y.a,{to:"/blog"})),r.a.createElement(y.b,{exact:!0,path:"/blog",component:Z}),r.a.createElement(y.b,{exact:!0,path:"/profile",component:me}),r.a.createElement(y.b,{exact:!0,path:"/blog/article/:article_id",component:K}),r.a.createElement(y.b,{exact:!0,path:"/signup",component:se}),r.a.createElement(y.b,{exact:!0,path:"/login",component:le}),r.a.createElement(y.b,{exact:!0,path:"/create-article",component:te}),r.a.createElement(y.b,{exact:!0,path:"/reset-password",component:de}),r.a.createElement(y.b,{exact:!0,path:"/reset-password/:uid/:token",component:he}))},ge=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.checkState()}},{key:"render",value:function(){return r.a.createElement("div",{className:"app-background"},r.a.createElement(d.a,null,r.a.createElement(p.a,null,r.a.createElement(C,null),r.a.createElement(pe,null),r.a.createElement(j,{className:"footer"}))))}}]),t}(r.a.Component),Ee=Object(h.b)((function(e){return{isAuthenticated:null!==e.auth.token}}),(function(e){return{checkState:function(){return e((function(e){var t=localStorage.getItem("token"),a=localStorage.getItem("username"),n=localStorage.getItem("user_id");if(void 0===t)e({type:"AUTH_LOGOUT"});else{var r=new Date(localStorage.getItem("expirationDate"));r<=new Date?e({type:"AUTH_LOGOUT"}):(e(w(t,a,n)),e(_((r.getTime()-(new Date).getTime())/1e3)))}}))}}}))(ge);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe=a(34),be=a(127),we=a(128),ve=function(e,t){return Object(we.a)({},e,{},t)},_e={token:null,error:null,loading:!1,username:null,user_id:0},ye=function(e,t){return ve(e,{error:null,loading:!0})},Se=function(e,t){return ve(e,{token:t.token,username:t.username,user_id:t.user_id,error:null,loading:!1})},ke=function(e,t){return ve(e,{error:t.error,loading:!1})},Oe=function(e,t){return ve(e,{token:null,user_id:0})},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return ye(e);case"AUTH_SUCCESS":return Se(e,t);case"AUTH_FAIL":return ke(e,t);case"AUTH_LOGOUT":return Oe(e);default:return e}},je=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||fe.d,Ae=Object(fe.c)({auth:Ce}),Te=Object(fe.e)(Ae,je(Object(fe.a)(be.a))),xe=r.a.createElement(h.a,{store:Te},r.a.createElement(Ee,null));o.a.render(xe,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[129,1,2]]]);
//# sourceMappingURL=main.59af632a.chunk.js.map