{"ast":null,"code":"/*\n * This file is part of ORY Editor.\n *\n * ORY Editor is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ORY Editor is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with ORY Editor.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @license LGPL-3.0\n * @copyright 2016-2018 Aeneas Rekkas\n * @author Aeneas Rekkas <aeneas+oss@aeneas.io>\n *\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport classNames from 'classnames';\nimport throttle from 'lodash/throttle';\nimport * as React from 'react';\nimport { Resizable as ReactResizeable } from 'react-resizable';\nimport { createStructuredSelector } from 'reselect';\nimport { editMode, resizeMode } from '../../../actions/display';\nimport { connect } from '../../../reduxConnect';\nimport { computeStepWidth, widthToSize } from './helper';\n\nvar Resizable =\n/** @class */\nfunction (_super) {\n  __extends(Resizable, _super);\n\n  function Resizable(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.onChangeSize = function (size) {\n      if (isNaN(size.width)) {\n        return;\n      }\n\n      var newSize = widthToSize(_this.state, _this.props, size);\n\n      _this.props.onChange(newSize);\n    };\n\n    _this.onResize = function (event, _a) {\n      var size = _a.size;\n\n      if (isNaN(size.width)) {\n        return;\n      }\n\n      _this.setState({\n        width: size.width\n      });\n\n      _this.onChangeSizeThrottled(size);\n    };\n\n    _this.onResizeStop = function (event, _a) {\n      var size = _a.size;\n\n      if (isNaN(size.width)) {\n        return;\n      }\n\n      _this.onChangeSize(size);\n\n      var newSize = widthToSize(_this.state, _this.props, size);\n\n      _this.setState({\n        width: newSize * _this.state.stepWidth\n      });\n    };\n\n    var sw = computeStepWidth(props);\n    _this.onChangeSizeThrottled = throttle(_this.onChangeSize, 100);\n    _this.state = {\n      stepWidth: sw,\n      width: props.node.size * sw,\n      steps: props.steps - 1 || 11\n    };\n    return _this;\n  }\n\n  Resizable.prototype.render = function () {\n    var _a;\n\n    var _b = this.props,\n        _c = _b.node,\n        bounds = _c.bounds,\n        inline = _c.inline,\n        children = _b.children;\n    return React.createElement(ReactResizeable, {\n      className: classNames('ory-cell-inner', 'ory-cell-resizable', (_a = {}, _a[\"ory-cell-resizable-inline-\" + (inline || '')] = inline, _a)),\n      onResize: this.onResize,\n      onResizeStop: this.onResizeStop,\n      minConstraints: inline ? null : [this.state.stepWidth, Infinity],\n      maxConstraints: inline ? null : [bounds.right * this.state.stepWidth, Infinity],\n      draggableOpts: {\n        axis: 'none',\n        offsetParent: document.body\n      },\n      width: this.state.width,\n      height: 0\n    }, React.createElement(\"div\", null, children));\n  };\n\n  return Resizable;\n}(React.PureComponent);\n\nvar mapStateToProps = createStructuredSelector({});\nvar mapDispatchToProps = {\n  resizeMode: resizeMode,\n  editMode: editMode\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Resizable);","map":{"version":3,"sources":["../../../../src/components/Cell/Resizable/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\n * This file is part of ORY Editor.\n *\n * ORY Editor is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ORY Editor is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with ORY Editor.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @license LGPL-3.0\n * @copyright 2016-2018 Aeneas Rekkas\n * @author Aeneas Rekkas <aeneas+oss@aeneas.io>\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport classNames from 'classnames';\nimport throttle from 'lodash/throttle';\nimport * as React from 'react';\nimport { Resizable as ReactResizeable } from 'react-resizable';\nimport { createStructuredSelector } from 'reselect';\nimport { editMode, resizeMode } from '../../../actions/display';\nimport { connect } from '../../../reduxConnect';\nimport { computeStepWidth, widthToSize } from './helper';\nvar Resizable = /** @class */ (function (_super) {\n    __extends(Resizable, _super);\n    function Resizable(props) {\n        var _this = _super.call(this, props) || this;\n        _this.onChangeSize = function (size) {\n            if (isNaN(size.width)) {\n                return;\n            }\n            var newSize = widthToSize(_this.state, _this.props, size);\n            _this.props.onChange(newSize);\n        };\n        _this.onResize = function (event, _a) {\n            var size = _a.size;\n            if (isNaN(size.width)) {\n                return;\n            }\n            _this.setState({ width: size.width });\n            _this.onChangeSizeThrottled(size);\n        };\n        _this.onResizeStop = function (event, _a) {\n            var size = _a.size;\n            if (isNaN(size.width)) {\n                return;\n            }\n            _this.onChangeSize(size);\n            var newSize = widthToSize(_this.state, _this.props, size);\n            _this.setState({ width: newSize * _this.state.stepWidth });\n        };\n        var sw = computeStepWidth(props);\n        _this.onChangeSizeThrottled = throttle(_this.onChangeSize, 100);\n        _this.state = {\n            stepWidth: sw,\n            width: props.node.size * sw,\n            steps: props.steps - 1 || 11,\n        };\n        return _this;\n    }\n    Resizable.prototype.render = function () {\n        var _a;\n        var _b = this.props, _c = _b.node, bounds = _c.bounds, inline = _c.inline, children = _b.children;\n        return (React.createElement(ReactResizeable, { className: classNames('ory-cell-inner', 'ory-cell-resizable', (_a = {},\n                _a[\"ory-cell-resizable-inline-\" + (inline || '')] = inline,\n                _a)), onResize: this.onResize, onResizeStop: this.onResizeStop, minConstraints: inline ? null : [this.state.stepWidth, Infinity], maxConstraints: inline ? null : [bounds.right * this.state.stepWidth, Infinity], draggableOpts: { axis: 'none', offsetParent: document.body }, width: this.state.width, height: 0 },\n            React.createElement(\"div\", null, children)));\n    };\n    return Resizable;\n}(React.PureComponent));\nvar mapStateToProps = createStructuredSelector({});\nvar mapDispatchToProps = { resizeMode: resizeMode, editMode: editMode };\nexport default connect(mapStateToProps, mapDispatchToProps)(Resizable);\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}