{"ast":null,"code":"/*\n * This file is part of ORY Editor.\n *\n * ORY Editor is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ORY Editor is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with ORY Editor.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @license LGPL-3.0\n * @copyright 2016-2018 Aeneas Rekkas\n * @author Aeneas Rekkas <aeneas+oss@aeneas.io>\n *\n */\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n\n  return ar;\n};\n\nimport { emptyFilter } from './empty';\nexport var flatten = function (c, n) {\n  return __spread(c, n);\n};\nexport var optimizeCells = function (cells) {\n  if (cells === void 0) {\n    cells = [];\n  }\n\n  return cells.filter(emptyFilter);\n};\nexport var optimizeRows = function (rows) {\n  if (rows === void 0) {\n    rows = [];\n  }\n\n  return rows.filter(emptyFilter);\n};\nexport var optimizeCell = function (_a) {\n  var rows = _a.rows,\n      other = __rest(_a, [\"rows\"]);\n\n  return __assign(__assign({}, other), {\n    rows: (rows || []).map(function (r) {\n      var _a = r.cells,\n          cells = _a === void 0 ? [] : _a;\n\n      if (cells.length !== 1) {\n        return [r];\n      }\n\n      var _b = cells[0],\n          _c = _b.rows,\n          cellRows = _c === void 0 ? [] : _c,\n          layout = _b.layout;\n\n      if (cellRows.length > 0 && !layout) {\n        return cellRows;\n      }\n\n      return [r];\n    }).reduce(flatten, [])\n  });\n};\nexport var optimizeRow = function (_a) {\n  var cells = _a.cells,\n      other = __rest(_a, [\"cells\"]);\n\n  return __assign(__assign({}, other), {\n    cells: (cells || []).map(function (c) {\n      var _a = c.rows,\n          rows = _a === void 0 ? [] : _a;\n\n      if (rows.length !== 1 || c.layout) {\n        return [c];\n      }\n\n      var _b = rows[0].cells,\n          rowCells = _b === void 0 ? [] : _b;\n\n      if (rowCells.length === 1) {\n        return rowCells;\n      }\n\n      return [c];\n    }).reduce(flatten, [])\n  });\n};","map":{"version":3,"sources":["../../../../src/reducer/editable/helper/optimize.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\n * This file is part of ORY Editor.\n *\n * ORY Editor is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ORY Editor is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with ORY Editor.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @license LGPL-3.0\n * @copyright 2016-2018 Aeneas Rekkas\n * @author Aeneas Rekkas <aeneas+oss@aeneas.io>\n *\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { emptyFilter } from './empty';\nexport var flatten = function (c, n) {\n    return __spread(c, n);\n};\nexport var optimizeCells = function (cells) {\n    if (cells === void 0) { cells = []; }\n    return cells.filter(emptyFilter);\n};\nexport var optimizeRows = function (rows) {\n    if (rows === void 0) { rows = []; }\n    return rows.filter(emptyFilter);\n};\nexport var optimizeCell = function (_a) {\n    var rows = _a.rows, other = __rest(_a, [\"rows\"]);\n    return (__assign(__assign({}, other), { rows: (rows || [])\n            .map(function (r) {\n            var _a = r.cells, cells = _a === void 0 ? [] : _a;\n            if (cells.length !== 1) {\n                return [r];\n            }\n            var _b = cells[0], _c = _b.rows, cellRows = _c === void 0 ? [] : _c, layout = _b.layout;\n            if (cellRows.length > 0 && !layout) {\n                return cellRows;\n            }\n            return [r];\n        })\n            .reduce(flatten, []) }));\n};\nexport var optimizeRow = function (_a) {\n    var cells = _a.cells, other = __rest(_a, [\"cells\"]);\n    return (__assign(__assign({}, other), { cells: (cells || [])\n            .map(function (c) {\n            var _a = c.rows, rows = _a === void 0 ? [] : _a;\n            if (rows.length !== 1 || c.layout) {\n                return [c];\n            }\n            var _b = rows[0].cells, rowCells = _b === void 0 ? [] : _b;\n            if (rowCells.length === 1) {\n                return rowCells;\n            }\n            return [c];\n        })\n            .reduce(flatten, []) }));\n};\n//# sourceMappingURL=optimize.js.map"]},"metadata":{},"sourceType":"module"}