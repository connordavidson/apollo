{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\n\nvar tslib_1 = require(\"tslib\");\n\nvar Bridge_1 = tslib_1.__importDefault(require(\"uniforms/Bridge\"));\n\nvar cloneDeep_1 = tslib_1.__importDefault(require(\"lodash/cloneDeep\"));\n\nvar get_1 = tslib_1.__importDefault(require(\"lodash/get\"));\n\nvar invariant_1 = tslib_1.__importDefault(require(\"invariant\"));\n\nvar joinName_1 = tslib_1.__importDefault(require(\"uniforms/joinName\"));\n\nvar lowerCase_1 = tslib_1.__importDefault(require(\"lodash/lowerCase\"));\n\nvar omit_1 = tslib_1.__importDefault(require(\"lodash/omit\"));\n\nvar upperFirst_1 = tslib_1.__importDefault(require(\"lodash/upperFirst\"));\n\nvar resolveRef = function (referance, schema) {\n  invariant_1[\"default\"](referance.startsWith('#'), 'Reference is not an internal reference, and only such are allowed: \"%s\"', referance);\n  var resolvedReference = referance.split('/').filter(function (part) {\n    return part && part !== '#';\n  }).reduce(function (definition, next) {\n    return definition[next];\n  }, schema);\n  invariant_1[\"default\"](resolvedReference, 'Reference not found in schema: \"%s\"', referance);\n  return resolvedReference;\n};\n\nvar distinctSchema = function (schema) {\n  if (schema.type === 'object') {\n    return schema;\n  }\n\n  if (schema.$ref) {\n    return tslib_1.__assign({}, schema, resolveRef(schema.$ref, schema));\n  }\n\n  return schema;\n};\n\nvar extractValue = function () {\n  var xs = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    xs[_i] = arguments[_i];\n  }\n\n  return xs.reduce(function (x, y) {\n    return x === false || x === null ? '' : x !== true && x !== undefined ? x : y;\n  });\n};\n\nvar pathToName = function (path) {\n  if (path[0] === '.') path = path.replace(/\\['(.+?)'\\]/g, '.$1').replace(/\\[(.+?)\\]/g, '.$1').replace(/\\\\'/g, \"'\");else path = path.replace(/\\//g, '.').replace(/~0/g, '~').replace(/~1/g, '/');\n  return path.slice(1);\n};\n\nvar toHumanLabel = function (label) {\n  return upperFirst_1[\"default\"](lowerCase_1[\"default\"](label));\n};\n\nvar JSONSchemaBridge =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(JSONSchemaBridge, _super);\n\n  function JSONSchemaBridge(schema, validator) {\n    var _this = _super.call(this) || this;\n\n    _this.schema = distinctSchema(schema);\n    _this._compiledSchema = {};\n    _this.validator = validator;\n    return _this;\n  }\n\n  JSONSchemaBridge.check = function () {\n    return false;\n  };\n\n  JSONSchemaBridge.prototype.getError = function (name, error) {\n    var nameParts = joinName_1[\"default\"](null, name);\n    var rootName = joinName_1[\"default\"](nameParts.slice(0, -1));\n    var baseName = nameParts[nameParts.length - 1];\n    return error && error.details && error.details.find && error.details.find(function (detail) {\n      var path = pathToName(detail.dataPath);\n      return name === path || rootName === path && baseName === detail.params.missingProperty;\n    });\n  };\n\n  JSONSchemaBridge.prototype.getErrorMessage = function (name, error) {\n    var scopedError = this.getError(name, error) || {};\n    return scopedError && scopedError.message || '';\n  };\n\n  JSONSchemaBridge.prototype.getErrorMessages = function (error) {\n    if (error) {\n      if (Array.isArray(error.details)) {\n        return error.details.reduce(function (acc, _a) {\n          var message = _a.message;\n          return acc.concat(message);\n        }, []);\n      }\n\n      return [error.message || error];\n    }\n\n    return [];\n  };\n\n  JSONSchemaBridge.prototype.getField = function (name) {\n    var _this = this;\n\n    return joinName_1[\"default\"](null, name).reduce(function (definition, next, nextIndex, array) {\n      var previous = joinName_1[\"default\"](array.slice(0, nextIndex));\n      var isRequired = (definition.required || (_this._compiledSchema[previous] || {}).required || []).includes(next);\n\n      var _key = joinName_1[\"default\"](previous, next);\n\n      var _definition = _this._compiledSchema[_key] || {};\n\n      if (next === '$' || next === '' + parseInt(next, 10)) {\n        invariant_1[\"default\"](definition.type === 'array', 'Field not found in schema: \"%s\"', name);\n        definition = Array.isArray(definition.items) ? definition.items[parseInt(next, 10)] : definition.items;\n      } else if (definition.type === 'object') {\n        invariant_1[\"default\"](definition.properties, 'Field properties not found in schema: \"%s\"', name);\n        definition = definition.properties[next];\n      } else {\n        var _a = ['allOf', 'anyOf', 'oneOf'].filter(function (key) {\n          return definition[key];\n        }).map(function (key) {\n          return definition[key].find(function (_a) {\n            var _b = _a.properties,\n                properties = _b === void 0 ? {} : _b;\n            return properties[next];\n          });\n        })[0],\n            _b = (_a === void 0 ? {} : _a).properties,\n            combinedDefinition = _b === void 0 ? {} : _b;\n        definition = combinedDefinition[next];\n      }\n\n      invariant_1[\"default\"](definition, 'Field not found in schema: \"%s\"', name);\n\n      if (definition.$ref) {\n        definition = resolveRef(definition.$ref, _this.schema);\n      }\n\n      ['allOf', 'anyOf', 'oneOf'].filter(function (key) {\n        return definition[key];\n      }).forEach(function (key) {\n        _definition[key] = definition[key].map(function (def) {\n          return def.$ref ? resolveRef(def.$ref, _this.schema) : def;\n        });\n      }); // Naive computation of combined type, properties and required\n\n      if (['allOf', 'anyOf', 'oneOf'].filter(function (key) {\n        return definition[key];\n      }).length) {\n        _definition.type = ([].concat(_definition.allOf, _definition.anyOf, _definition.oneOf).filter(function (def) {\n          return def;\n        }).find(function (def) {\n          return def.type;\n        }) || {}).type;\n\n        var _c = [].concat(_definition.allOf, _definition.anyOf, _definition.oneOf).filter(function (def) {\n          return def;\n        }).reduce(function (_a, _b) {\n          var _properties = _a[0],\n              _required = _a[1];\n          var properties = _b.properties,\n              required = _b.required;\n          return [Object.assign(_properties, properties), _required.concat(required)];\n        }, [{}, []]),\n            properties = _c[0],\n            required = _c[1];\n\n        _definition.properties = properties;\n        _definition.required = required;\n      }\n\n      _this._compiledSchema[_key] = Object.assign(_definition, {\n        isRequired: isRequired\n      });\n      return definition;\n    }, this.schema);\n  };\n\n  JSONSchemaBridge.prototype.getInitialValue = function (name, props) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    var _a = this.getField(name),\n        _default = _a[\"default\"],\n        _type = _a.type;\n\n    var _b = this._compiledSchema[name],\n        _c = _b[\"default\"],\n        defaultValue = _c === void 0 ? _default !== undefined ? _default : get_1[\"default\"](this.schema[\"default\"], name) : _c,\n        _d = _b.type,\n        type = _d === void 0 ? _type : _d;\n    if (defaultValue !== undefined) return cloneDeep_1[\"default\"](defaultValue);\n\n    if (type === 'array') {\n      var item = this.getInitialValue(joinName_1[\"default\"](name, '0'));\n      var items = props.initialCount || 0;\n      return Array(items).fill(item);\n    }\n\n    if (type === 'object') return {};\n    return undefined;\n  };\n\n  JSONSchemaBridge.prototype.getProps = function (name, props) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    var _a = this.getField(name),\n        uniforms = _a.uniforms,\n        field = tslib_1.__rest(_a, [\"uniforms\"]);\n\n    var _b = omit_1[\"default\"](tslib_1.__assign({}, field, uniforms, this._compiledSchema[name]), ['default', 'format', 'type']),\n        enum_ = _b[\"enum\"],\n        isRequired = _b.isRequired,\n        title = _b.title,\n        ready = tslib_1.__rest(_b, [\"enum\", \"isRequired\", \"title\"]);\n\n    if (enum_) ready.allowedValues = enum_;\n    if (field.type === 'number') ready.decimal = true;\n    if (uniforms && uniforms.type !== undefined) ready.type = uniforms.type;\n    if (ready.required === undefined) ready.required = isRequired;\n    ready.label = extractValue(ready.label, title, toHumanLabel(joinName_1[\"default\"](null, name).slice(-1)[0]));\n    var options = props.options || ready.options;\n\n    if (options) {\n      if (!Array.isArray(options)) {\n        ready.transform = function (value) {\n          return options[value];\n        };\n\n        ready.allowedValues = Object.keys(options);\n      } else {\n        ready.transform = function (value) {\n          return options.find(function (option) {\n            return option.value === value;\n          }).label;\n        };\n\n        ready.allowedValues = options.map(function (option) {\n          return option.value;\n        });\n      }\n    }\n\n    return ready;\n  };\n\n  JSONSchemaBridge.prototype.getSubfields = function (name) {\n    if (!name) {\n      if (this.schema.properties) {\n        return Object.keys(this.schema.properties);\n      }\n\n      return [];\n    }\n\n    var _a = this.getField(name),\n        _type = _a.type,\n        _properties = _a.properties;\n\n    var _b = this._compiledSchema[name],\n        _c = _b.type,\n        fieldType = _c === void 0 ? _type : _c,\n        _d = _b.properties,\n        fieldProperties = _d === void 0 ? _properties : _d;\n\n    if (fieldType === 'object') {\n      return Object.keys(fieldProperties);\n    }\n\n    return [];\n  };\n\n  JSONSchemaBridge.prototype.getType = function (name) {\n    var _a = this.getField(name),\n        _type = _a.type,\n        fieldFormat = _a.format;\n\n    var _b = this._compiledSchema[name].type,\n        fieldType = _b === void 0 ? _type : _b;\n    if (fieldFormat === 'date-time') return Date;\n    if (fieldType === 'string') return String;\n    if (fieldType === 'number') return Number;\n    if (fieldType === 'integer') return Number;\n    if (fieldType === 'object') return Object;\n    if (fieldType === 'array') return Array;\n    if (fieldType === 'boolean') return Boolean;\n    invariant_1[\"default\"](fieldType !== 'null', 'Field \"%s\" can not be represented as a type null', name);\n    return fieldType;\n  };\n\n  JSONSchemaBridge.prototype.getValidator = function () {\n    return this.validator;\n  };\n\n  return JSONSchemaBridge;\n}(Bridge_1[\"default\"]);\n\nexports[\"default\"] = JSONSchemaBridge;","map":{"version":3,"sources":["/Users/connordavidson/Desktop/apollo_blog/apollo-blog/node_modules/uniforms-bridge-json-schema/JSONSchemaBridge.js"],"names":["exports","__esModule","tslib_1","require","Bridge_1","__importDefault","cloneDeep_1","get_1","invariant_1","joinName_1","lowerCase_1","omit_1","upperFirst_1","resolveRef","referance","schema","startsWith","resolvedReference","split","filter","part","reduce","definition","next","distinctSchema","type","$ref","__assign","extractValue","xs","_i","arguments","length","x","y","undefined","pathToName","path","replace","slice","toHumanLabel","label","JSONSchemaBridge","_super","__extends","validator","_this","call","_compiledSchema","check","prototype","getError","name","error","nameParts","rootName","baseName","details","find","detail","dataPath","params","missingProperty","getErrorMessage","scopedError","message","getErrorMessages","Array","isArray","acc","_a","concat","getField","nextIndex","array","previous","isRequired","required","includes","_key","_definition","parseInt","items","properties","key","map","_b","combinedDefinition","forEach","def","allOf","anyOf","oneOf","_c","_properties","_required","Object","assign","getInitialValue","props","_default","_type","defaultValue","_d","item","initialCount","fill","getProps","uniforms","field","__rest","enum_","title","ready","allowedValues","decimal","options","transform","value","keys","option","getSubfields","fieldType","fieldProperties","getType","fieldFormat","format","Date","String","Number","Boolean","getValidator"],"mappings":"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","sourcesContent":["\"use strict\";\nexports.__esModule = true;\nvar tslib_1 = require(\"tslib\");\nvar Bridge_1 = tslib_1.__importDefault(require(\"uniforms/Bridge\"));\nvar cloneDeep_1 = tslib_1.__importDefault(require(\"lodash/cloneDeep\"));\nvar get_1 = tslib_1.__importDefault(require(\"lodash/get\"));\nvar invariant_1 = tslib_1.__importDefault(require(\"invariant\"));\nvar joinName_1 = tslib_1.__importDefault(require(\"uniforms/joinName\"));\nvar lowerCase_1 = tslib_1.__importDefault(require(\"lodash/lowerCase\"));\nvar omit_1 = tslib_1.__importDefault(require(\"lodash/omit\"));\nvar upperFirst_1 = tslib_1.__importDefault(require(\"lodash/upperFirst\"));\nvar resolveRef = function (referance, schema) {\n    invariant_1[\"default\"](referance.startsWith('#'), 'Reference is not an internal reference, and only such are allowed: \"%s\"', referance);\n    var resolvedReference = referance\n        .split('/')\n        .filter(function (part) { return part && part !== '#'; })\n        .reduce(function (definition, next) { return definition[next]; }, schema);\n    invariant_1[\"default\"](resolvedReference, 'Reference not found in schema: \"%s\"', referance);\n    return resolvedReference;\n};\nvar distinctSchema = function (schema) {\n    if (schema.type === 'object') {\n        return schema;\n    }\n    if (schema.$ref) {\n        return tslib_1.__assign({}, schema, resolveRef(schema.$ref, schema));\n    }\n    return schema;\n};\nvar extractValue = function () {\n    var xs = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        xs[_i] = arguments[_i];\n    }\n    return xs.reduce(function (x, y) {\n        return x === false || x === null ? '' : x !== true && x !== undefined ? x : y;\n    });\n};\nvar pathToName = function (path) {\n    if (path[0] === '.')\n        path = path\n            .replace(/\\['(.+?)'\\]/g, '.$1')\n            .replace(/\\[(.+?)\\]/g, '.$1')\n            .replace(/\\\\'/g, \"'\");\n    else\n        path = path\n            .replace(/\\//g, '.')\n            .replace(/~0/g, '~')\n            .replace(/~1/g, '/');\n    return path.slice(1);\n};\nvar toHumanLabel = function (label) { return upperFirst_1[\"default\"](lowerCase_1[\"default\"](label)); };\nvar JSONSchemaBridge = /** @class */ (function (_super) {\n    tslib_1.__extends(JSONSchemaBridge, _super);\n    function JSONSchemaBridge(schema, validator) {\n        var _this = _super.call(this) || this;\n        _this.schema = distinctSchema(schema);\n        _this._compiledSchema = {};\n        _this.validator = validator;\n        return _this;\n    }\n    JSONSchemaBridge.check = function () {\n        return false;\n    };\n    JSONSchemaBridge.prototype.getError = function (name, error) {\n        var nameParts = joinName_1[\"default\"](null, name);\n        var rootName = joinName_1[\"default\"](nameParts.slice(0, -1));\n        var baseName = nameParts[nameParts.length - 1];\n        return (error &&\n            error.details &&\n            error.details.find &&\n            error.details.find(function (detail) {\n                var path = pathToName(detail.dataPath);\n                return (name === path ||\n                    (rootName === path && baseName === detail.params.missingProperty));\n            }));\n    };\n    JSONSchemaBridge.prototype.getErrorMessage = function (name, error) {\n        var scopedError = this.getError(name, error) || {};\n        return (scopedError && scopedError.message) || '';\n    };\n    JSONSchemaBridge.prototype.getErrorMessages = function (error) {\n        if (error) {\n            if (Array.isArray(error.details)) {\n                return error.details.reduce(function (acc, _a) {\n                    var message = _a.message;\n                    return acc.concat(message);\n                }, []);\n            }\n            return [error.message || error];\n        }\n        return [];\n    };\n    JSONSchemaBridge.prototype.getField = function (name) {\n        var _this = this;\n        return joinName_1[\"default\"](null, name).reduce(function (definition, next, nextIndex, array) {\n            var previous = joinName_1[\"default\"](array.slice(0, nextIndex));\n            var isRequired = (definition.required ||\n                (_this._compiledSchema[previous] || {}).required ||\n                []).includes(next);\n            var _key = joinName_1[\"default\"](previous, next);\n            var _definition = _this._compiledSchema[_key] || {};\n            if (next === '$' || next === '' + parseInt(next, 10)) {\n                invariant_1[\"default\"](definition.type === 'array', 'Field not found in schema: \"%s\"', name);\n                definition = Array.isArray(definition.items)\n                    ? definition.items[parseInt(next, 10)]\n                    : definition.items;\n            }\n            else if (definition.type === 'object') {\n                invariant_1[\"default\"](definition.properties, 'Field properties not found in schema: \"%s\"', name);\n                definition = definition.properties[next];\n            }\n            else {\n                var _a = [\n                    'allOf',\n                    'anyOf',\n                    'oneOf'\n                ]\n                    .filter(function (key) { return definition[key]; })\n                    .map(function (key) {\n                    return definition[key].find(function (_a) {\n                        var _b = _a.properties, properties = _b === void 0 ? {} : _b;\n                        return properties[next];\n                    });\n                })[0], _b = (_a === void 0 ? {} : _a).properties, combinedDefinition = _b === void 0 ? {} : _b;\n                definition = combinedDefinition[next];\n            }\n            invariant_1[\"default\"](definition, 'Field not found in schema: \"%s\"', name);\n            if (definition.$ref) {\n                definition = resolveRef(definition.$ref, _this.schema);\n            }\n            ['allOf', 'anyOf', 'oneOf']\n                .filter(function (key) { return definition[key]; })\n                .forEach(function (key) {\n                _definition[key] = definition[key].map(function (def) {\n                    return def.$ref ? resolveRef(def.$ref, _this.schema) : def;\n                });\n            });\n            // Naive computation of combined type, properties and required\n            if (['allOf', 'anyOf', 'oneOf'].filter(function (key) { return definition[key]; }).length) {\n                _definition.type = ([]\n                    .concat(_definition.allOf, _definition.anyOf, _definition.oneOf)\n                    .filter(function (def) { return def; })\n                    .find(function (def) { return def.type; }) || {}).type;\n                var _c = []\n                    .concat(_definition.allOf, _definition.anyOf, _definition.oneOf)\n                    .filter(function (def) { return def; })\n                    .reduce(function (_a, _b) {\n                    var _properties = _a[0], _required = _a[1];\n                    var properties = _b.properties, required = _b.required;\n                    return [\n                        Object.assign(_properties, properties),\n                        _required.concat(required)\n                    ];\n                }, [{}, []]), properties = _c[0], required = _c[1];\n                _definition.properties = properties;\n                _definition.required = required;\n            }\n            _this._compiledSchema[_key] = Object.assign(_definition, { isRequired: isRequired });\n            return definition;\n        }, this.schema);\n    };\n    JSONSchemaBridge.prototype.getInitialValue = function (name, props) {\n        if (props === void 0) { props = {}; }\n        var _a = this.getField(name), _default = _a[\"default\"], _type = _a.type;\n        var _b = this._compiledSchema[name], _c = _b[\"default\"], defaultValue = _c === void 0 ? _default !== undefined\n            ? _default\n            : get_1[\"default\"](this.schema[\"default\"], name) : _c, _d = _b.type, type = _d === void 0 ? _type : _d;\n        if (defaultValue !== undefined)\n            return cloneDeep_1[\"default\"](defaultValue);\n        if (type === 'array') {\n            var item = this.getInitialValue(joinName_1[\"default\"](name, '0'));\n            var items = props.initialCount || 0;\n            return Array(items).fill(item);\n        }\n        if (type === 'object')\n            return {};\n        return undefined;\n    };\n    JSONSchemaBridge.prototype.getProps = function (name, props) {\n        if (props === void 0) { props = {}; }\n        var _a = this.getField(name), uniforms = _a.uniforms, field = tslib_1.__rest(_a, [\"uniforms\"]);\n        var _b = omit_1[\"default\"](tslib_1.__assign({}, field, uniforms, this._compiledSchema[name]), ['default', 'format', 'type']), enum_ = _b[\"enum\"], isRequired = _b.isRequired, title = _b.title, ready = tslib_1.__rest(_b, [\"enum\", \"isRequired\", \"title\"]);\n        if (enum_)\n            ready.allowedValues = enum_;\n        if (field.type === 'number')\n            ready.decimal = true;\n        if (uniforms && uniforms.type !== undefined)\n            ready.type = uniforms.type;\n        if (ready.required === undefined)\n            ready.required = isRequired;\n        ready.label = extractValue(ready.label, title, toHumanLabel(joinName_1[\"default\"](null, name).slice(-1)[0]));\n        var options = props.options || ready.options;\n        if (options) {\n            if (!Array.isArray(options)) {\n                ready.transform = function (value) { return options[value]; };\n                ready.allowedValues = Object.keys(options);\n            }\n            else {\n                ready.transform = function (value) {\n                    return options.find(function (option) { return option.value === value; }).label;\n                };\n                ready.allowedValues = options.map(function (option) { return option.value; });\n            }\n        }\n        return ready;\n    };\n    JSONSchemaBridge.prototype.getSubfields = function (name) {\n        if (!name) {\n            if (this.schema.properties) {\n                return Object.keys(this.schema.properties);\n            }\n            return [];\n        }\n        var _a = this.getField(name), _type = _a.type, _properties = _a.properties;\n        var _b = this._compiledSchema[name], _c = _b.type, fieldType = _c === void 0 ? _type : _c, _d = _b.properties, fieldProperties = _d === void 0 ? _properties : _d;\n        if (fieldType === 'object') {\n            return Object.keys(fieldProperties);\n        }\n        return [];\n    };\n    JSONSchemaBridge.prototype.getType = function (name) {\n        var _a = this.getField(name), _type = _a.type, fieldFormat = _a.format;\n        var _b = this._compiledSchema[name].type, fieldType = _b === void 0 ? _type : _b;\n        if (fieldFormat === 'date-time')\n            return Date;\n        if (fieldType === 'string')\n            return String;\n        if (fieldType === 'number')\n            return Number;\n        if (fieldType === 'integer')\n            return Number;\n        if (fieldType === 'object')\n            return Object;\n        if (fieldType === 'array')\n            return Array;\n        if (fieldType === 'boolean')\n            return Boolean;\n        invariant_1[\"default\"](fieldType !== 'null', 'Field \"%s\" can not be represented as a type null', name);\n        return fieldType;\n    };\n    JSONSchemaBridge.prototype.getValidator = function () {\n        return this.validator;\n    };\n    return JSONSchemaBridge;\n}(Bridge_1[\"default\"]));\nexports[\"default\"] = JSONSchemaBridge;\n"]},"metadata":{},"sourceType":"script"}