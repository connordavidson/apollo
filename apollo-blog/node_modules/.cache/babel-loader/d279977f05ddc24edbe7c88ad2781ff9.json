{"ast":null,"code":"var _jsxFileName = \"/Users/connordavidson/Desktop/apollo-blog/src/containers/Home.js\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\"; // import RichText from 'prismic-reactjs';\n\nimport { Container, Card, ListGroup, Button, Form, Col, Popover, OverlayTrigger, Badge, Alert, Row } from 'react-bootstrap';\nimport { connect } from \"react-redux\"; // found at https://www.npmjs.com/package/react-bootstrap-icons\n\nimport { Pencil, StarFill, CheckCircle } from 'react-bootstrap-icons';\nimport RichText from './Misc/RichText';\nimport LoaderSpinner from './Misc/LoaderSpinner';\nimport { all_articles_url, create_email_url } from \"../backend-urls.js\";\nimport \"../content/css/App.css\";\n\nclass Home extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      error: null,\n      //stores the error that comes from the backend\n      loading: true,\n      //to determine if the page is loading\n      articles: [],\n      //stores all of the articles retrieved from the database\n      pinned_article: null,\n      //stores the data for the pinned article\n      email: \"\",\n      //stores the email from the \"add email\" widget\n      email_submitted: null //stores the response value after a user submits their email\n\n    };\n\n    this.handleGetArticles = () => {\n      axios.get(all_articles_url).then(response => {\n        //gets all the information for the article with pinned = true. had to put it in here because this function wouldn't set the state fast enough for another method to access it in the componentDidMount.\n        var articles = response.data;\n        var pinned_article = [];\n\n        for (var article_id in articles) {\n          if (response.data[article_id].pinned) {\n            pinned_article.id = articles[article_id].id;\n            pinned_article.title = articles[article_id].title;\n            pinned_article.author = articles[article_id].author;\n            pinned_article.created_date = articles[article_id].created_date;\n            pinned_article.body = articles[article_id].body.substring(0, 500);\n            break;\n          }\n        }\n\n        this.setState({\n          loading: false,\n          articles: response.data,\n          pinned_article: pinned_article\n        });\n      }).catch(error => {\n        this.setState({\n          error: error,\n          loading: false\n        });\n      });\n    };\n\n    this.handlePostEmail = () => {\n      var data = new FormData();\n      data.append('email', this.state.email);\n      axios.post(create_email_url, data).then(response => {\n        this.setState({\n          email_submitted: true\n        });\n      }).catch(error => {\n        this.setState({\n          error: error\n        });\n      });\n    };\n\n    this.handleEmailValidated = () => {\n      var email = this.state.email; //these are the most abstract validations that I can think of.. length is greater than 5 (contains an @, a ., and a letter before/after each. ie \"a@b.co\" would pass (I'm not sure if there are top-level domains with single letter so i just required 2 for the tld))\n\n      var email_length_more_than_four = email.length > 5;\n      var email_contains_at = email.includes(\"@\");\n      var email_contains_period = email.includes(\".\");\n      return !(email_length_more_than_four && email_contains_at && email_contains_period);\n    };\n\n    this.handleEmail = text => {\n      this.setState({\n        email: text.target.value\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      loading: true\n    });\n    this.handleGetArticles();\n  } //retrieves all the articles from the database\n\n\n  render() {\n    const {\n      loading,\n      error,\n      articles,\n      pinned_article,\n      email_submitted\n    } = this.state;\n    const {\n      authenticated,\n      token\n    } = this.props; //for email popover\n\n    const email_popover = React.createElement(Popover, {\n      id: \"popover-basic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(Popover.Title, {\n      as: \"h3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Email Updates\"), React.createElement(Popover.Content, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"email\",\n      placeholder: \"Enter email\",\n      onChange: this.handleEmail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    })), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, email_submitted ? React.createElement(CheckCircle, {\n      className: \"text-success font-size-2-5em\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }) : React.createElement(Button, {\n      disabled: this.handleEmailValidated(),\n      variant: \"primary\",\n      type: \"submit\",\n      onClick: this.handlePostEmail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Submit\")))));\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: {\n        span: 4\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"verdana-font\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"The Apollo Blog\")), React.createElement(Col, {\n      sm: {\n        offset: 9\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, authenticated ? token === \"8582b323219d80196bb1e017411808a67fe70365\" && React.createElement(\"div\", {\n      className: \"float-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/create-article\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"outline-secondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"Write an Article \", React.createElement(Pencil, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    })))) : React.createElement(\"div\", {\n      className: \"float-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(OverlayTrigger, {\n      trigger: 'click',\n      placement: \"left\",\n      overlay: email_popover,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(Badge, {\n      className: \"font-size-10px\",\n      style: {\n        cursor: 'pointer'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, \"Sign up for email updates\")))))), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }), React.createElement(ListGroup, {\n      variant: \"flush\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, pinned_article !== null && React.createElement(ListGroup.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: 'blog/article/' + pinned_article.id,\n      className: \"article-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(Card, {\n      className: \"width-100-percent margin-bottom-75px\",\n      id: pinned_article.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(Card.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(Card.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, pinned_article.title, \" \", React.createElement(StarFill, {\n      color: \"royalblue\",\n      className: \"float-right font-size-1-25em\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    })), React.createElement(Card.Subtitle, {\n      className: \"mb-2 text-muted\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, \"By \", React.createElement(\"a\", {\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, pinned_article.author), \" \", React.createElement(Badge, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, new Date(pinned_article.created_date).toDateString(), \" \")), React.createElement(Card.Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(RichText, {\n      text: pinned_article.body + \"...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    })))))), loading === true ? React.createElement(LoaderSpinner, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }) : articles.length > 0 ? //reverse() makes the articles appear in reverse chronological order\n    articles.map(article => React.createElement(ListGroup.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: 'blog/article/' + article.id,\n      className: \"article-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(Card, {\n      className: \"width-100-percent\",\n      id: article.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(Card.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(Card.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, article.title), React.createElement(Card.Subtitle, {\n      className: \"mb-2 text-muted\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, \"By \", React.createElement(\"a\", {\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, article.author), \" \", React.createElement(Badge, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, new Date(article.created_date).toDateString(), \" \")), React.createElement(Card.Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(RichText, {\n      text: article.body.substring(0, 200) + '...',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }))))))) : React.createElement(Alert, {\n      variant: \"dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, \"There was an error retrieving our articles\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth.token,\n    authenticated: state.auth.token !== null\n  };\n};\n\nconst mapDispatchToProps = state => {\n  return {};\n};\n\nexport default connect(mapStateToProps)(Home);","map":{"version":3,"sources":["/Users/connordavidson/Desktop/apollo-blog/src/containers/Home.js"],"names":["React","Link","axios","Container","Card","ListGroup","Button","Form","Col","Popover","OverlayTrigger","Badge","Alert","Row","connect","Pencil","StarFill","CheckCircle","RichText","LoaderSpinner","all_articles_url","create_email_url","Home","Component","state","error","loading","articles","pinned_article","email","email_submitted","handleGetArticles","get","then","response","data","article_id","pinned","id","title","author","created_date","body","substring","setState","catch","handlePostEmail","FormData","append","post","handleEmailValidated","email_length_more_than_four","length","email_contains_at","includes","email_contains_period","handleEmail","text","target","value","componentDidMount","render","authenticated","token","props","email_popover","span","offset","cursor","Date","toDateString","map","article","mapStateToProps","auth","mapDispatchToProps"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CACA;;AACA,SACEC,SADF,EAEEC,IAFF,EAGEC,SAHF,EAIEC,MAJF,EAKEC,IALF,EAMEC,GANF,EAOEC,OAPF,EAQEC,cARF,EASEC,KATF,EAUEC,KAVF,EAWEC,GAXF,QAaO,iBAbP;AAcA,SAASC,OAAT,QAAwB,aAAxB,C,CACA;;AACA,SAASC,MAAT,EAAkBC,QAAlB,EAA6BC,WAA7B,QAAgD,uBAAhD;AAEA,OAAOC,QAAP,MAAqB,iBAArB;AACA,OAAOC,aAAP,MAA0B,sBAA1B;AACA,SACEC,gBADF,EAEEC,gBAFF,QAGO,oBAHP;AAKA,OAAO,wBAAP;;AAKA,MAAMC,IAAN,SAAmBtB,KAAK,CAACuB,SAAzB,CAAmC;AAAA;AAAA;AAAA,SAEjCC,KAFiC,GAEzB;AACNC,MAAAA,KAAK,EAAE,IADD;AACQ;AACdC,MAAAA,OAAO,EAAG,IAFJ;AAEW;AACjBC,MAAAA,QAAQ,EAAG,EAHL;AAGU;AAChBC,MAAAA,cAAc,EAAG,IAJX;AAIkB;AACxBC,MAAAA,KAAK,EAAE,EALD;AAKM;AACZC,MAAAA,eAAe,EAAG,IANZ,CAMmB;;AANnB,KAFyB;;AAAA,SAqBjCC,iBArBiC,GAqBb,MAAM;AACxB7B,MAAAA,KAAK,CACF8B,GADH,CACOZ,gBADP,EAEGa,IAFH,CAEQC,QAAQ,IAAI;AAEhB;AACA,YAAIP,QAAQ,GAAGO,QAAQ,CAACC,IAAxB;AACA,YAAIP,cAAc,GAAG,EAArB;;AACA,aAAI,IAAIQ,UAAR,IAAsBT,QAAtB,EAA+B;AAC7B,cAAIO,QAAQ,CAACC,IAAT,CAAcC,UAAd,EAA0BC,MAA9B,EAAsC;AACpCT,YAAAA,cAAc,CAACU,EAAf,GAAoBX,QAAQ,CAACS,UAAD,CAAR,CAAqBE,EAAzC;AACAV,YAAAA,cAAc,CAACW,KAAf,GAAuBZ,QAAQ,CAACS,UAAD,CAAR,CAAqBG,KAA5C;AACAX,YAAAA,cAAc,CAACY,MAAf,GAAwBb,QAAQ,CAACS,UAAD,CAAR,CAAqBI,MAA7C;AACAZ,YAAAA,cAAc,CAACa,YAAf,GAA8Bd,QAAQ,CAACS,UAAD,CAAR,CAAqBK,YAAnD;AACAb,YAAAA,cAAc,CAACc,IAAf,GAAsBf,QAAQ,CAACS,UAAD,CAAR,CAAqBM,IAArB,CAA0BC,SAA1B,CAAoC,CAApC,EAAuC,GAAvC,CAAtB;AACA;AACD;AACF;;AAED,aAAKC,QAAL,CAAc;AACZlB,UAAAA,OAAO,EAAE,KADG;AAEZC,UAAAA,QAAQ,EAAEO,QAAQ,CAACC,IAFP;AAGZP,UAAAA,cAAc,EAAGA;AAHL,SAAd;AAMD,OAxBH,EAyBGiB,KAzBH,CAyBSpB,KAAK,IAAI;AACd,aAAKmB,QAAL,CAAc;AACZnB,UAAAA,KAAK,EAAEA,KADK;AAEZC,UAAAA,OAAO,EAAG;AAFE,SAAd;AAID,OA9BH;AA+BD,KArDgC;;AAAA,SAwDjCoB,eAxDiC,GAwDf,MAAM;AACtB,UAAIX,IAAI,GAAG,IAAIY,QAAJ,EAAX;AACAZ,MAAAA,IAAI,CAACa,MAAL,CAAY,OAAZ,EAAsB,KAAKxB,KAAL,CAAWK,KAAjC;AAEA3B,MAAAA,KAAK,CACF+C,IADH,CACQ5B,gBADR,EAC2Bc,IAD3B,EAEGF,IAFH,CAEQC,QAAQ,IAAI;AAChB,aAAKU,QAAL,CAAc;AACZd,UAAAA,eAAe,EAAG;AADN,SAAd;AAGD,OANH,EAOGe,KAPH,CAOSpB,KAAK,IAAI;AACd,aAAKmB,QAAL,CAAc;AACZnB,UAAAA,KAAK,EAAEA;AADK,SAAd;AAGD,OAXH;AAYD,KAxEgC;;AAAA,SA0EjCyB,oBA1EiC,GA0EV,MAAM;AAC3B,UAAIrB,KAAK,GAAG,KAAKL,KAAL,CAAWK,KAAvB,CAD2B,CAE3B;;AACA,UAAIsB,2BAA2B,GAAGtB,KAAK,CAACuB,MAAN,GAAe,CAAjD;AACA,UAAIC,iBAAiB,GAAGxB,KAAK,CAACyB,QAAN,CAAe,GAAf,CAAxB;AACA,UAAIC,qBAAqB,GAAG1B,KAAK,CAACyB,QAAN,CAAe,GAAf,CAA5B;AAEA,aAAO,EAAEH,2BAA2B,IAAIE,iBAA/B,IAAoDE,qBAAtD,CAAP;AACD,KAlFgC;;AAAA,SAoFjCC,WApFiC,GAoFlBC,IAAD,IAAU;AACtB,WAAKb,QAAL,CAAc;AACZf,QAAAA,KAAK,EAAE4B,IAAI,CAACC,MAAL,CAAYC;AADP,OAAd;AAGD,KAxFgC;AAAA;;AAYjCC,EAAAA,iBAAiB,GAAE;AACjB,SAAKhB,QAAL,CAAc;AACZlB,MAAAA,OAAO,EAAE;AADG,KAAd;AAIA,SAAKK,iBAAL;AACD,GAlBgC,CAoBjC;;;AA0EA8B,EAAAA,MAAM,GAAE;AAEN,UAAM;AACJnC,MAAAA,OADI;AAEJD,MAAAA,KAFI;AAGJE,MAAAA,QAHI;AAIJC,MAAAA,cAJI;AAKJE,MAAAA;AALI,QAOF,KAAKN,KAPT;AASA,UAAM;AACJsC,MAAAA,aADI;AAEJC,MAAAA;AAFI,QAIF,KAAKC,KAJT,CAXM,CAkBN;;AACA,UAAMC,aAAa,GACjB,oBAAC,OAAD;AAAS,MAAA,EAAE,EAAC,eAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,OAAD,CAAS,KAAT;AAAe,MAAA,EAAE,EAAC,IAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAEE,oBAAC,OAAD,CAAS,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,CAAM,OAAN;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,WAAW,EAAC,aAFd;AAGE,MAAA,QAAQ,EAAE,KAAKT,WAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,EAQE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI1B,eAAe,GACb,oBAAC,WAAD;AAAa,MAAA,SAAS,EAAC,8BAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADa,GAGb,oBAAC,MAAD;AACE,MAAA,QAAQ,EAAE,KAAKoB,oBAAL,EADZ;AAEE,MAAA,OAAO,EAAC,SAFV;AAGE,MAAA,IAAI,EAAC,QAHP;AAIE,MAAA,OAAO,EAAE,KAAKJ,eAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALN,CARF,CADJ,CAFF,CADF;AAiCA,WAEE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE;AAACoB,QAAAA,IAAI,EAAC;AAAN,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,CADF,EAME,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE;AAACC,QAAAA,MAAM,EAAC;AAAR,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEIL,aAAa,GACXC,KAAK,KAAK,0CAAV,IACA;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,iBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,mBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAqD,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAArD,CADF,CADF,CAFW,GAUP;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE,oBAAC,cAAD;AACE,MAAA,OAAO,EAAE,OADX;AAEE,MAAA,SAAS,EAAC,MAFZ;AAGE,MAAA,OAAO,EAAEE,aAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKE,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAC,gBAAjB;AAAkC,MAAA,KAAK,EAAE;AAACG,QAAAA,MAAM,EAAE;AAAT,OAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCALF,CAFF,CAZV,CANF,CADF,CADF,EA4CE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA5CF,EA6CE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA7CF,EA+CE,oBAAC,SAAD;AAAW,MAAA,OAAO,EAAC,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEIxC,cAAc,KAAK,IAAnB,IACE,oBAAC,SAAD,CAAW,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAE,kBAAgBA,cAAc,CAACU,EAAzC;AAA6C,MAAA,SAAS,EAAC,cAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAC,sCAAhB;AAAuD,MAAA,EAAE,EAAEV,cAAc,CAACU,EAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAaV,cAAc,CAACW,KAA5B,OAAmC,oBAAC,QAAD;AAAU,MAAA,KAAK,EAAC,WAAhB;AAA4B,MAAA,SAAS,EAAC,8BAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAnC,CADF,EAEE,oBAAC,IAAD,CAAM,QAAN;AAAe,MAAA,SAAS,EAAC,iBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA8C;AAAG,MAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAaX,cAAc,CAACY,MAA5B,CAA9C,OAAsF,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAU,IAAI6B,IAAJ,CAASzC,cAAc,CAACa,YAAxB,EAAsC6B,YAAtC,EAAV,MAAtF,CAFF,EAGE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAE1C,cAAc,CAACc,IAAf,GAAqB,KAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADH,CAHF,CADF,CADF,CADH,CAHN,EAmBIhB,OAAO,KAAK,IAAZ,GACE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,GAGEC,QAAQ,CAACyB,MAAT,GAAkB,CAAlB,GACE;AACAzB,IAAAA,QAAQ,CAAC4C,GAAT,CAAaC,OAAO,IAChB,oBAAC,SAAD,CAAW,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAE,kBAAgBA,OAAO,CAAClC,EAAlC;AAAsC,MAAA,SAAS,EAAC,cAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAC,mBAAhB;AAAoC,MAAA,EAAE,EAAEkC,OAAO,CAAClC,EAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAakC,OAAO,CAACjC,KAArB,CADF,EAEE,oBAAC,IAAD,CAAM,QAAN;AAAe,MAAA,SAAS,EAAC,iBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA8C;AAAG,MAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAaiC,OAAO,CAAChC,MAArB,CAA9C,OAA+E,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAU,IAAI6B,IAAJ,CAASG,OAAO,CAAC/B,YAAjB,EAA+B6B,YAA/B,EAAV,MAA/E,CAFF,EAGE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAEE,OAAO,CAAC9B,IAAR,CAAaC,SAAb,CAAuB,CAAvB,EAA0B,GAA1B,IAAiC,KAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAHF,CADF,CADF,CADF,CADJ,CAFF,GAmBE,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAzCR,CA/CF,CAFF;AAwGD;;AA1PgC;;AA8PnC,MAAM8B,eAAe,GAAIjD,KAAD,IAAW;AACjC,SAAO;AACLuC,IAAAA,KAAK,EAAGvC,KAAK,CAACkD,IAAN,CAAWX,KADd;AAELD,IAAAA,aAAa,EAAEtC,KAAK,CAACkD,IAAN,CAAWX,KAAX,KAAqB;AAF/B,GAAP;AAKD,CAND;;AAQA,MAAMY,kBAAkB,GAAInD,KAAD,IAAW;AACpC,SAAO,EAAP;AAED,CAHD;;AAMA,eACEV,OAAO,CACL2D,eADK,CAAP,CAGEnD,IAHF,CADF","sourcesContent":["import React from \"react\" ;\nimport {Link} from \"react-router-dom\";\nimport axios from \"axios\";\n// import RichText from 'prismic-reactjs';\nimport {\n  Container ,\n  Card ,\n  ListGroup ,\n  Button,\n  Form ,\n  Col ,\n  Popover ,\n  OverlayTrigger ,\n  Badge ,\n  Alert ,\n  Row ,\n\n} from 'react-bootstrap';\nimport { connect } from \"react-redux\";\n// found at https://www.npmjs.com/package/react-bootstrap-icons\nimport { Pencil , StarFill , CheckCircle } from 'react-bootstrap-icons';\n\nimport RichText from './Misc/RichText';\nimport LoaderSpinner from './Misc/LoaderSpinner'\nimport {\n  all_articles_url ,\n  create_email_url ,\n} from \"../backend-urls.js\" ;\n\nimport \"../content/css/App.css\";\n\n\n\n\nclass Home extends React.Component {\n\n  state = {\n    error: null , //stores the error that comes from the backend\n    loading : true , //to determine if the page is loading\n    articles : [] , //stores all of the articles retrieved from the database\n    pinned_article : null , //stores the data for the pinned article\n    email: \"\" , //stores the email from the \"add email\" widget\n    email_submitted : null , //stores the response value after a user submits their email\n\n  }\n\n  componentDidMount(){\n    this.setState({\n      loading: true ,\n\n    })\n    this.handleGetArticles();\n  }\n\n  //retrieves all the articles from the database\n  handleGetArticles = () => {\n    axios\n      .get(all_articles_url)\n      .then(response => {\n\n        //gets all the information for the article with pinned = true. had to put it in here because this function wouldn't set the state fast enough for another method to access it in the componentDidMount.\n        var articles = response.data\n        var pinned_article = []\n        for(var article_id in articles){\n          if (response.data[article_id].pinned ){\n            pinned_article.id = articles[article_id].id ;\n            pinned_article.title = articles[article_id].title ;\n            pinned_article.author = articles[article_id].author ;\n            pinned_article.created_date = articles[article_id].created_date ;\n            pinned_article.body = articles[article_id].body.substring(0, 500) ;\n            break ;\n          }\n        }\n\n        this.setState({\n          loading: false ,\n          articles: response.data ,\n          pinned_article : pinned_article ,\n\n        })\n      })\n      .catch(error => {\n        this.setState({\n          error: error ,\n          loading : false\n        })\n      })\n  }\n\n\n  handlePostEmail = () => {\n    var data = new FormData();\n    data.append('email' , this.state.email) ;\n\n    axios\n      .post(create_email_url , data)\n      .then(response => {\n        this.setState({\n          email_submitted : true ,\n        })\n      })\n      .catch(error => {\n        this.setState({\n          error: error  ,\n        })\n      })\n  }\n\n  handleEmailValidated = () => {\n    var email = this.state.email\n    //these are the most abstract validations that I can think of.. length is greater than 5 (contains an @, a ., and a letter before/after each. ie \"a@b.co\" would pass (I'm not sure if there are top-level domains with single letter so i just required 2 for the tld))\n    var email_length_more_than_four = email.length > 5\n    var email_contains_at = email.includes(\"@\")\n    var email_contains_period = email.includes(\".\")\n\n    return !(email_length_more_than_four && email_contains_at && email_contains_period )\n  }\n\n  handleEmail = (text) => {\n    this.setState({\n      email: text.target.value\n    });\n  }\n\n\n\n\n\n  render(){\n\n    const {\n      loading ,\n      error ,\n      articles ,\n      pinned_article ,\n      email_submitted ,\n\n    } = this.state\n\n    const {\n      authenticated ,\n      token ,\n\n    } = this.props\n\n\n    //for email popover\n    const email_popover = (\n      <Popover id=\"popover-basic\" >\n        <Popover.Title as=\"h3\">Email Updates</Popover.Title>\n        <Popover.Content >\n            <Row >\n              <Col>\n                <Form.Control\n                  type=\"email\"\n                  placeholder=\"Enter email\"\n                  onChange={this.handleEmail}\n                />\n              </Col>\n              <Col>\n                {\n                  email_submitted ?\n                    <CheckCircle className=\"text-success font-size-2-5em\" />\n                  :\n                    <Button\n                      disabled={this.handleEmailValidated()}\n                      variant=\"primary\"\n                      type=\"submit\"\n                      onClick={this.handlePostEmail}\n                    >\n                      Submit\n                    </Button>\n                }\n              </Col>\n            </Row>\n        </Popover.Content>\n      </Popover>\n    )\n\n\n    return(\n\n      <React.Fragment>\n        <Container>\n          <Row>\n            <Col sm={{span:4}}>\n              <h1 className=\"verdana-font\">\n                The Apollo Blog\n              </h1>\n            </Col>\n            <Col sm={{offset:9}}>\n              {\n                authenticated ?\n                  token === \"8582b323219d80196bb1e017411808a67fe70365\" &&\n                  <div className=\"float-right\">\n                    <Link to=\"/create-article\" >\n                      <Button variant=\"outline-secondary\">Write an Article <Pencil /></Button>\n                    </Link>\n                  </div>\n                :\n\n\n                      <div className=\"float-right\">\n\n                        <OverlayTrigger\n                          trigger={'click'}\n                          placement=\"left\"\n                          overlay={email_popover}\n                        >\n                          <Badge className=\"font-size-10px\" style={{cursor: 'pointer' , }}>\n                            Sign up for email updates\n                          </Badge>\n                        </OverlayTrigger>\n\n\n                      </div>\n\n\n              }\n\n\n            </Col>\n          </Row>\n\n\n        </Container>\n        <hr />\n        <br />\n\n        <ListGroup variant=\"flush\">\n          {\n            pinned_article !== null &&\n              <ListGroup.Item >\n                 <Link to={'blog/article/'+pinned_article.id} className=\"article-link\">\n                   <Card className=\"width-100-percent margin-bottom-75px\" id={pinned_article.id}>\n                     <Card.Body>\n                       <Card.Title>{pinned_article.title} <StarFill color=\"royalblue\" className=\"float-right font-size-1-25em\" /></Card.Title>\n                       <Card.Subtitle className=\"mb-2 text-muted\">By <a href='#'>{pinned_article.author}</a> <Badge>{  new Date(pinned_article.created_date).toDateString() } </Badge></Card.Subtitle>\n                       <Card.Text >\n                          <RichText text={pinned_article.body +\"...\" } />\n                       </Card.Text>\n                     </Card.Body>\n                   </Card>\n                 </Link>\n                </ListGroup.Item>\n          }\n\n          {\n            loading === true ?\n              <LoaderSpinner />\n            :\n              articles.length > 0 ?\n                //reverse() makes the articles appear in reverse chronological order\n                articles.map(article =>  (\n                    <ListGroup.Item>\n                      <Link to={'blog/article/'+article.id} className=\"article-link\">\n                        <Card className=\"width-100-percent\" id={article.id}>\n                          <Card.Body>\n                            <Card.Title>{article.title}</Card.Title>\n                            <Card.Subtitle className=\"mb-2 text-muted\">By <a href='#'>{article.author}</a> <Badge>{  new Date(article.created_date).toDateString() } </Badge></Card.Subtitle>\n                            <Card.Text >\n                              <RichText text={article.body.substring(0, 200) + '...'} />\n                            </Card.Text>\n                          </Card.Body>\n                        </Card>\n                      </Link>\n                    </ListGroup.Item>\n                  )\n                )\n              :\n                <Alert variant=\"dark\">\n                  There was an error retrieving our articles\n                </Alert>\n\n\n          }\n\n        </ListGroup>\n\n\n      </ React.Fragment>\n\n\n    )\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  return {\n    token : state.auth.token ,\n    authenticated: state.auth.token !== null ,\n\n  }\n}\n\nconst mapDispatchToProps = (state) => {\n  return {\n  }\n}\n\n\nexport default\n  connect(\n    mapStateToProps,\n\n  )(Home) ;\n"]},"metadata":{},"sourceType":"module"}