{"ast":null,"code":"var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nimport { Dialog, DialogActions, DialogContent } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport DoneIcon from '@material-ui/icons/Done';\nimport { makeUniformsSchema } from '@react-page/create-plugin-materialui';\nimport React, { useCallback, useRef, useState } from 'react';\nimport { AutoFields as AutoFieldsOrg, AutoForm as AutoFormOrg } from 'uniforms-material'; // see https://github.com/vazco/uniforms/issues/617\n// tslint:disable-next-line:no-any\n\nvar AutoForm = AutoFormOrg; // tslint:disable-next-line:no-any\n\nvar AutoFields = AutoFieldsOrg;\n\nfunction Controls(props) {\n  var uniformsSchema = makeUniformsSchema(props.schema); // tslint:disable-next-line:no-any\n\n  var formRef = useRef();\n\n  var _a = __read(useState(null), 2),\n      text = _a[0],\n      setText = _a[1];\n\n  var onCancel = function () {\n    props.close();\n  };\n\n  var onSubmit = useCallback(function (data) {\n    props.close();\n\n    if (props.shouldInsertWithText) {\n      props.add({\n        text: text,\n        data: data\n      });\n    } else {\n      props.add({\n        data: data\n      });\n    }\n  }, [props.shouldInsertWithText, text]);\n  var submitForm = useCallback(function () {\n    if (formRef.current) {\n      formRef.current.submit();\n    }\n  }, [formRef.current]);\n\n  var onRemove = function () {\n    props.remove();\n    props.close();\n  };\n\n  return React.createElement(Dialog, {\n    disableEnforceFocus: true,\n    PaperProps: {\n      style: {\n        minWidth: 300\n      }\n    },\n    open: props.open\n  }, React.createElement(DialogContent, null, !props.shouldInsertWithText ? null : React.createElement(\"div\", null, React.createElement(TextField, {\n    placeholder: 'Text',\n    onChange: function (e) {\n      return setText(e.target.value);\n    },\n    value: text\n  })), React.createElement(AutoForm, {\n    ref: formRef,\n    model: props.data,\n    schema: uniformsSchema,\n    onSubmit: onSubmit\n  }, React.createElement(AutoFields, null))), React.createElement(DialogActions, null, React.createElement(Button, {\n    variant: \"text\",\n    onClick: onCancel,\n    style: {\n      marginRight: 'auto'\n    }\n  }, props.cancelLabel || 'Cancel'), props.isActive ? React.createElement(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: onRemove\n  }, props.removeLabel || 'Remove', React.createElement(DeleteIcon, {\n    style: {\n      marginLeft: 10\n    }\n  })) : null, React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: submitForm\n  }, props.submitLabel || 'Ok', React.createElement(DoneIcon, {\n    style: {\n      marginLeft: 10\n    }\n  }))));\n}\n\nexport default Controls;","map":{"version":3,"sources":["../../../src/pluginFactories/components/UniformsControls.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { Dialog, DialogActions, DialogContent } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport DoneIcon from '@material-ui/icons/Done';\nimport { makeUniformsSchema } from '@react-page/create-plugin-materialui';\nimport React, { useCallback, useRef, useState } from 'react';\nimport { AutoFields as AutoFieldsOrg, AutoForm as AutoFormOrg } from 'uniforms-material';\n// see https://github.com/vazco/uniforms/issues/617\n// tslint:disable-next-line:no-any\nvar AutoForm = AutoFormOrg;\n// tslint:disable-next-line:no-any\nvar AutoFields = AutoFieldsOrg;\nfunction Controls(props) {\n    var uniformsSchema = makeUniformsSchema(props.schema);\n    // tslint:disable-next-line:no-any\n    var formRef = useRef();\n    var _a = __read(useState(null), 2), text = _a[0], setText = _a[1];\n    var onCancel = function () {\n        props.close();\n    };\n    var onSubmit = useCallback(function (data) {\n        props.close();\n        if (props.shouldInsertWithText) {\n            props.add({ text: text, data: data });\n        }\n        else {\n            props.add({ data: data });\n        }\n    }, [props.shouldInsertWithText, text]);\n    var submitForm = useCallback(function () {\n        if (formRef.current) {\n            formRef.current.submit();\n        }\n    }, [formRef.current]);\n    var onRemove = function () {\n        props.remove();\n        props.close();\n    };\n    return (React.createElement(Dialog, { disableEnforceFocus: true, PaperProps: { style: { minWidth: 300 } }, open: props.open },\n        React.createElement(DialogContent, null,\n            !props.shouldInsertWithText ? null : (React.createElement(\"div\", null,\n                React.createElement(TextField, { placeholder: 'Text', onChange: function (e) { return setText(e.target.value); }, value: text }))),\n            React.createElement(AutoForm, { ref: formRef, model: props.data, schema: uniformsSchema, onSubmit: onSubmit },\n                React.createElement(AutoFields, null))),\n        React.createElement(DialogActions, null,\n            React.createElement(Button, { variant: \"text\", onClick: onCancel, style: { marginRight: 'auto' } }, props.cancelLabel || 'Cancel'),\n            props.isActive ? (React.createElement(Button, { variant: \"contained\", color: \"secondary\", onClick: onRemove },\n                props.removeLabel || 'Remove',\n                React.createElement(DeleteIcon, { style: { marginLeft: 10 } }))) : null,\n            React.createElement(Button, { variant: \"contained\", color: \"primary\", onClick: submitForm },\n                props.submitLabel || 'Ok',\n                React.createElement(DoneIcon, { style: { marginLeft: 10 } })))));\n}\nexport default Controls;\n//# sourceMappingURL=UniformsControls.js.map"]},"metadata":{},"sourceType":"module"}