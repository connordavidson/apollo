{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { lazyLoad } from '@react-page/core';\nimport * as React from 'react';\nimport { ActionTypes } from 'redux-undo';\nimport Component from './Component';\nimport { defaultTranslations } from './default/settings';\nimport HtmlToSlate from './HtmlToSlate';\nimport v002 from './migrations/v002';\nimport v003 from './migrations/v003';\nimport v004 from './migrations/v004';\nimport * as pluginFactories from './pluginFactories/index';\nimport * as defaultPlugins from './plugins/index';\nimport Renderer from './Renderer';\nimport makeSlatePluginsFromDef from './utils/makeSlatePluginsFromDef';\nimport transformInitialSlateState from './utils/transformInitialSlateState';\nvar slatePlugins = defaultPlugins;\nexport { defaultPlugins, slatePlugins, pluginFactories, HtmlToSlate };\nvar Subject = lazyLoad(function () {\n  return import('@material-ui/icons/Subject');\n});\nvar Controls = lazyLoad(function () {\n  return import('./Controls/');\n});\nvar migrations = [v002, v003, v004];\nvar defaultConfig = {\n  icon: React.createElement(Subject, null),\n  plugins: defaultPlugins,\n  defaultPluginType: 'PARAGRAPH/PARAGRAPH',\n  Renderer: Renderer,\n  Controls: Controls,\n  name: 'ory/editor/core/content/slate',\n  version: '0.0.4',\n  translations: defaultTranslations,\n  migrations: migrations,\n  allowInlineNeighbours: true\n};\n\nfunction plugin(customize) {\n  var settings = customize ? customize(defaultConfig) : defaultConfig;\n\n  var createInitialState = function (customizeInitialSlateState) {\n    var defaultInitialState = function (_a) {\n      var cplugins = _a.plugins;\n      return {\n        children: [{\n          plugin: cplugins.paragraphs.paragraph,\n          children: ['']\n        }]\n      };\n    };\n\n    var func = customizeInitialSlateState ? customizeInitialSlateState : defaultInitialState;\n    return transformInitialSlateState(func({\n      plugins: settings.plugins\n    }));\n  }; // plugins should be flatten\n  // NEW: to make it easier to manage and group plugins,\n  // they now need to be an object of object with group and keys, see type SlatePluginCollection\n\n\n  var plugins = makeSlatePluginsFromDef(settings.plugins);\n  var htmlToSlate = HtmlToSlate({\n    plugins: plugins\n  });\n  return {\n    Component: function (props) {\n      return React.createElement(Component, __assign({\n        Renderer: settings.Renderer,\n        Controls: settings.Controls,\n        plugins: plugins,\n        translations: settings.translations,\n        defaultPluginType: settings.defaultPluginType\n      }, props));\n    },\n    name: settings.name,\n    version: settings.version,\n    IconComponent: settings.icon,\n    text: settings.translations.pluginName,\n    description: settings.translations.pluginDescription,\n    hideInMenu: settings.hideInMenu,\n    allowInlineNeighbours: settings.allowInlineNeighbours,\n    // tslint:disable-next-line:no-any\n    reducer: function (state, action) {\n      var _a, _b, _c, _d;\n\n      if ((action.type === ActionTypes.UNDO || action.type === ActionTypes.REDO) && (_d = (_c = (_b = (_a = state) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.state) === null || _c === void 0 ? void 0 : _c.slate, _d !== null && _d !== void 0 ? _d : false)) {\n        return __assign(__assign({}, state), {\n          content: __assign(__assign({}, state.content), {\n            state: __assign({}, state.content.state)\n          })\n        });\n      }\n\n      return state;\n    },\n    handleRemoveHotKey: function () {\n      return Promise.reject();\n    },\n    handleFocusPreviousHotKey: function () {\n      return Promise.reject();\n    },\n    handleFocusNextHotKey: function () {\n      return Promise.reject();\n    },\n    createInitialState: createInitialState,\n    createInitialSlateState: createInitialState,\n    htmlToSlate: htmlToSlate,\n    serialize: function (_a) {\n      var slate = _a.slate;\n      return {\n        slate: slate\n      };\n    },\n    unserialize: function (_a) {\n      var slate = _a.slate,\n          importFromHtml = _a.importFromHtml,\n          rest = __rest(_a, [\"slate\", \"importFromHtml\"]);\n\n      if (importFromHtml) {\n        return htmlToSlate(importFromHtml);\n      }\n\n      return {\n        slate: slate\n      };\n    },\n    // TODO this is disabled because of #207\n    // merge = hooks.merge\n    // split = hooks.split\n    migrations: settings.migrations\n  };\n}\n\nexport default plugin;","map":{"version":3,"sources":["../src/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { lazyLoad } from '@react-page/core';\nimport * as React from 'react';\nimport { ActionTypes } from 'redux-undo';\nimport Component from './Component';\nimport { defaultTranslations } from './default/settings';\nimport HtmlToSlate from './HtmlToSlate';\nimport v002 from './migrations/v002';\nimport v003 from './migrations/v003';\nimport v004 from './migrations/v004';\nimport * as pluginFactories from './pluginFactories/index';\nimport * as defaultPlugins from './plugins/index';\nimport Renderer from './Renderer';\nimport makeSlatePluginsFromDef from './utils/makeSlatePluginsFromDef';\nimport transformInitialSlateState from './utils/transformInitialSlateState';\nvar slatePlugins = defaultPlugins;\nexport { defaultPlugins, slatePlugins, pluginFactories, HtmlToSlate };\nvar Subject = lazyLoad(function () { return import('@material-ui/icons/Subject'); });\nvar Controls = lazyLoad(function () { return import('./Controls/'); });\nvar migrations = [v002, v003, v004];\nvar defaultConfig = {\n    icon: React.createElement(Subject, null),\n    plugins: defaultPlugins,\n    defaultPluginType: 'PARAGRAPH/PARAGRAPH',\n    Renderer: Renderer,\n    Controls: Controls,\n    name: 'ory/editor/core/content/slate',\n    version: '0.0.4',\n    translations: defaultTranslations,\n    migrations: migrations,\n    allowInlineNeighbours: true,\n};\nfunction plugin(customize) {\n    var settings = (customize\n        ? customize(defaultConfig)\n        : defaultConfig);\n    var createInitialState = function (customizeInitialSlateState) {\n        var defaultInitialState = function (_a) {\n            var cplugins = _a.plugins;\n            return ({\n                children: [\n                    {\n                        plugin: cplugins.paragraphs.paragraph,\n                        children: [''],\n                    },\n                ],\n            });\n        };\n        var func = customizeInitialSlateState\n            ? customizeInitialSlateState\n            : defaultInitialState;\n        return transformInitialSlateState(func({ plugins: settings.plugins }));\n    };\n    // plugins should be flatten\n    // NEW: to make it easier to manage and group plugins,\n    // they now need to be an object of object with group and keys, see type SlatePluginCollection\n    var plugins = makeSlatePluginsFromDef(settings.plugins);\n    var htmlToSlate = HtmlToSlate({ plugins: plugins });\n    return {\n        Component: function (props) { return (React.createElement(Component, __assign({ Renderer: settings.Renderer, Controls: settings.Controls, plugins: plugins, translations: settings.translations, defaultPluginType: settings.defaultPluginType }, props))); },\n        name: settings.name,\n        version: settings.version,\n        IconComponent: settings.icon,\n        text: settings.translations.pluginName,\n        description: settings.translations.pluginDescription,\n        hideInMenu: settings.hideInMenu,\n        allowInlineNeighbours: settings.allowInlineNeighbours,\n        // tslint:disable-next-line:no-any\n        reducer: function (state, action) {\n            var _a, _b, _c, _d;\n            if ((action.type === ActionTypes.UNDO ||\n                action.type === ActionTypes.REDO) &&\n                (_d = (_c = (_b = (_a = state) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.state) === null || _c === void 0 ? void 0 : _c.slate, (_d !== null && _d !== void 0 ? _d : false))) {\n                return __assign(__assign({}, state), { content: __assign(__assign({}, state.content), { state: __assign({}, state.content.state) }) });\n            }\n            return state;\n        },\n        handleRemoveHotKey: function () { return Promise.reject(); },\n        handleFocusPreviousHotKey: function () { return Promise.reject(); },\n        handleFocusNextHotKey: function () { return Promise.reject(); },\n        createInitialState: createInitialState,\n        createInitialSlateState: createInitialState,\n        htmlToSlate: htmlToSlate,\n        serialize: function (_a) {\n            var slate = _a.slate;\n            return ({ slate: slate });\n        },\n        unserialize: function (_a) {\n            var slate = _a.slate, importFromHtml = _a.importFromHtml, rest = __rest(_a, [\"slate\", \"importFromHtml\"]);\n            if (importFromHtml) {\n                return htmlToSlate(importFromHtml);\n            }\n            return { slate: slate };\n        },\n        // TODO this is disabled because of #207\n        // merge = hooks.merge\n        // split = hooks.split\n        migrations: settings.migrations,\n    };\n}\nexport default plugin;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}