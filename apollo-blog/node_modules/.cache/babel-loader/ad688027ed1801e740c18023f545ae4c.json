{"ast":null,"code":"/*\n * This file is part of ORY Editor.\n *\n * ORY Editor is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ORY Editor is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with ORY Editor.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @license LGPL-3.0\n * @copyright 2016-2018 Aeneas Rekkas\n * @author Aeneas Rekkas <aeneas+oss@aeneas.io>\n *\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { createStructuredSelector } from 'reselect';\nimport { blurAllCells, focusCell, resizeCell } from '../../actions/cell';\nimport { connect } from '../../reduxConnect';\nimport { isEditMode, isInsertMode, isLayoutMode, isPreviewMode, isResizeMode } from '../../selector/display';\nimport { editableConfig, node, purifiedNode } from '../../selector/editable';\nimport { removeCell } from './../../actions/cell/core';\nimport Inner from './Inner';\nimport Resizable from './Resizable';\n\nvar gridClass = function (_a) {\n  var size = _a.node.size,\n      rest = __rest(_a, [\"node\"]);\n\n  if (rest.isPreviewMode || rest.isEditMode) {\n    return \"ory-cell-\" + (rest.isPreviewMode || rest.isEditMode ? 'sm' : 'xs') + \"-\" + (size || 12) + \" ory-cell-xs-12\";\n  }\n\n  return \"ory-cell-xs-\" + (size || 12);\n};\n\nvar stopClick = function (_isEditMode) {\n  return function (e) {\n    return _isEditMode ? e.stopPropagation() : null;\n  };\n};\n\nvar Cell =\n/** @class */\nfunction (_super) {\n  __extends(Cell, _super);\n\n  function Cell() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Cell.prototype.render = function () {\n    var _a;\n\n    var _b = this.props,\n        id = _b.id,\n        rowWidth = _b.rowWidth,\n        rowHeight = _b.rowHeight,\n        updateDimensions = _b.updateDimensions,\n        _c = _b.node,\n        inline = _c.inline,\n        resizable = _c.resizable,\n        hasInlineNeighbour = _c.hasInlineNeighbour,\n        focused = _c.focused,\n        isDraft = _c.isDraft;\n\n    if (isDraft && this.props.isPreviewMode) {\n      return null;\n    }\n\n    return React.createElement(\"div\", {\n      className: classNames('ory-cell', gridClass(this.props), (_a = {\n        'ory-cell-has-inline-neighbour': hasInlineNeighbour\n      }, _a[\"ory-cell-inline-\" + (inline || '')] = inline, _a['ory-cell-focused'] = focused, _a['ory-cell-is-draft'] = isDraft, _a['ory-cell-resizing-overlay'] = this.props.isResizeMode, _a['ory-cell-bring-to-front'] = !this.props.isResizeMode && !this.props.isLayoutMode && inline, _a)),\n      onClick: stopClick(this.props.isEditMode)\n    }, resizable && this.props.isResizeMode && rowWidth ? React.createElement(Resizable, __assign({}, this.props, {\n      id: id,\n      rowWidth: rowWidth,\n      rowHeight: rowHeight,\n      updateDimensions: updateDimensions,\n      node: this.props.node,\n      steps: 12,\n      onChange: this.props.resizeCell\n    }), React.createElement(Inner, __assign({}, this.props, {\n      styles: null\n    }))) : React.createElement(Inner, __assign({}, this.props, {\n      styles: null\n    })));\n  };\n\n  return Cell;\n}(React.PureComponent);\n\nvar mapStateToProps = createStructuredSelector({\n  isPreviewMode: isPreviewMode,\n  isEditMode: isEditMode,\n  isResizeMode: isResizeMode,\n  // required by sub-components\n  isInsertMode: isInsertMode,\n  isLayoutMode: isLayoutMode,\n  config: editableConfig,\n  node: purifiedNode,\n  rawNode: function (state, props) {\n    return function () {\n      return node(state, props);\n    };\n  }\n});\n\nvar mapDispatchToProps = function (dispatch, _a) {\n  var id = _a.id;\n  return bindActionCreators({\n    resizeCell: resizeCell(id),\n    focusCell: focusCell(id),\n    blurAllCells: blurAllCells,\n    removeCell: function () {\n      return removeCell(id);\n    }\n  }, // tslint:disable-next-line:no-any\n  dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Cell);","map":{"version":3,"sources":["../../../src/components/Cell/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\n * This file is part of ORY Editor.\n *\n * ORY Editor is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ORY Editor is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with ORY Editor.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @license LGPL-3.0\n * @copyright 2016-2018 Aeneas Rekkas\n * @author Aeneas Rekkas <aeneas+oss@aeneas.io>\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { createStructuredSelector } from 'reselect';\nimport { blurAllCells, focusCell, resizeCell } from '../../actions/cell';\nimport { connect } from '../../reduxConnect';\nimport { isEditMode, isInsertMode, isLayoutMode, isPreviewMode, isResizeMode } from '../../selector/display';\nimport { editableConfig, node, purifiedNode } from '../../selector/editable';\nimport { removeCell } from './../../actions/cell/core';\nimport Inner from './Inner';\nimport Resizable from './Resizable';\nvar gridClass = function (_a) {\n    var size = _a.node.size, rest = __rest(_a, [\"node\"]);\n    if (rest.isPreviewMode || rest.isEditMode) {\n        return \"ory-cell-\" + (rest.isPreviewMode || rest.isEditMode ? 'sm' : 'xs') + \"-\" + (size || 12) + \" ory-cell-xs-12\";\n    }\n    return \"ory-cell-xs-\" + (size || 12);\n};\nvar stopClick = function (_isEditMode) { return function (e) { return (_isEditMode ? e.stopPropagation() : null); }; };\nvar Cell = /** @class */ (function (_super) {\n    __extends(Cell, _super);\n    function Cell() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Cell.prototype.render = function () {\n        var _a;\n        var _b = this.props, id = _b.id, rowWidth = _b.rowWidth, rowHeight = _b.rowHeight, updateDimensions = _b.updateDimensions, _c = _b.node, inline = _c.inline, resizable = _c.resizable, hasInlineNeighbour = _c.hasInlineNeighbour, focused = _c.focused, isDraft = _c.isDraft;\n        if (isDraft && this.props.isPreviewMode) {\n            return null;\n        }\n        return (React.createElement(\"div\", { className: classNames('ory-cell', gridClass(this.props), (_a = {\n                    'ory-cell-has-inline-neighbour': hasInlineNeighbour\n                },\n                _a[\"ory-cell-inline-\" + (inline || '')] = inline,\n                _a['ory-cell-focused'] = focused,\n                _a['ory-cell-is-draft'] = isDraft,\n                _a['ory-cell-resizing-overlay'] = this.props.isResizeMode,\n                _a['ory-cell-bring-to-front'] = !this.props.isResizeMode && !this.props.isLayoutMode && inline,\n                _a)), onClick: stopClick(this.props.isEditMode) }, resizable && this.props.isResizeMode && rowWidth ? (React.createElement(Resizable, __assign({}, this.props, { id: id, rowWidth: rowWidth, rowHeight: rowHeight, updateDimensions: updateDimensions, node: this.props.node, steps: 12, onChange: this.props.resizeCell }),\n            React.createElement(Inner, __assign({}, this.props, { styles: null })))) : (React.createElement(Inner, __assign({}, this.props, { styles: null })))));\n    };\n    return Cell;\n}(React.PureComponent));\nvar mapStateToProps = createStructuredSelector({\n    isPreviewMode: isPreviewMode,\n    isEditMode: isEditMode,\n    isResizeMode: isResizeMode,\n    // required by sub-components\n    isInsertMode: isInsertMode,\n    isLayoutMode: isLayoutMode,\n    config: editableConfig,\n    node: purifiedNode,\n    rawNode: function (state, props) { return function () { return node(state, props); }; },\n});\nvar mapDispatchToProps = function (dispatch, _a) {\n    var id = _a.id;\n    return bindActionCreators({\n        resizeCell: resizeCell(id),\n        focusCell: focusCell(id),\n        blurAllCells: blurAllCells,\n        removeCell: function () { return removeCell(id); },\n    }, \n    // tslint:disable-next-line:no-any\n    dispatch);\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Cell);\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}