{"ast":null,"code":"/*\n * This file is part of ORY Editor.\n *\n * ORY Editor is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ORY Editor is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with ORY Editor.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @license LGPL-3.0\n * @copyright 2016-2018 Aeneas Rekkas\n * @author Aeneas Rekkas <aeneas+oss@aeneas.io>\n *\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport classNames from 'classnames';\nimport onElementResize from 'element-resize-event';\nimport * as React from 'react';\n\nvar defaultGetWidth = function (element) {\n  return element.clientWidth;\n};\n\nvar defaultGetHeight = function (element) {\n  return element.clientHeight;\n};\n\nvar Dimensions = function (_a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.getHeight,\n      getHeight = _c === void 0 ? defaultGetHeight : _c,\n      _d = _b.getWidth,\n      getWidth = _d === void 0 ? defaultGetWidth : _d,\n      _e = _b.className,\n      className = _e === void 0 ? null : _e,\n      _f = _b.elementResize,\n      elementResize = _f === void 0 ? false : _f;\n\n  return function (ComposedComponent) {\n    var Decorator =\n    /** @class */\n    function (_super) {\n      __extends(Decorator, _super);\n\n      function Decorator(props) {\n        var _this = _super.call(this, props) || this;\n\n        _this.updateDimensions = function () {\n          var container = _this.containerRef;\n\n          if (!container) {\n            return;\n          }\n\n          var containerWidth = getWidth(container);\n          var containerHeight = getHeight(container);\n\n          if (containerWidth !== _this.state.containerWidth || containerHeight !== _this.state.containerHeight) {\n            _this.setState({\n              containerWidth: containerWidth,\n              containerHeight: containerHeight\n            });\n          }\n        };\n\n        _this.onResize = function () {\n          if (_this.rqf) {\n            return;\n          }\n\n          _this.rqf = _this.getWindow().requestAnimationFrame(function () {\n            _this.rqf = null;\n\n            _this.updateDimensions();\n          });\n        };\n\n        _this.onContainerRef = function (ref) {\n          _this.containerRef = ref;\n\n          _this.updateDimensions();\n        };\n\n        _this.state = {};\n        return _this;\n      }\n\n      Decorator.prototype.componentDidMount = function () {\n        if (!this.containerRef) {\n          throw new Error('Cannot find container div');\n        }\n\n        this.updateDimensions();\n\n        if (elementResize) {\n          // Experimental: `element-resize-event` fires when an element resizes.\n          // It attaches its own window resize listener and also uses\n          // requestAnimationFrame, so we can just call `this.updateDimensions`.\n          onElementResize(this.containerRef, this.updateDimensions);\n        } else {\n          this.getWindow().addEventListener('resize', this.onResize, false);\n        }\n      }; // This cann not be used here because it doesn't listen to state changes.\n\n\n      Decorator.prototype.componentWillUnmount = function () {\n        this.getWindow().removeEventListener('resize', this.onResize);\n      }; // If the component is mounted in a different window to the javascript\n      // context, as with https://github.com/JakeGinnivan/react-popout\n      // then the `window` global will be different from the `window` that\n      // contains the component.\n      // Depends on `defaultView` which is not supported <IE9\n\n\n      Decorator.prototype.getWindow = function () {\n        return this.containerRef ? this.containerRef.ownerDocument.defaultView || window : window;\n      };\n\n      Decorator.prototype.render = function () {\n        return React.createElement(\"div\", {\n          className: classNames(className, 'ory-dimensions'),\n          ref: this.onContainerRef\n        }, React.createElement(ComposedComponent, __assign({}, this.state, this.props, {\n          updateDimensions: this.updateDimensions\n        })));\n      };\n\n      return Decorator;\n    }(React.Component);\n\n    return function (props) {\n      return React.createElement(Decorator, __assign({}, props));\n    };\n  };\n};\n\nexport default Dimensions;","map":{"version":3,"sources":["../../../src/components/Dimensions/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\n * This file is part of ORY Editor.\n *\n * ORY Editor is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ORY Editor is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with ORY Editor.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @license LGPL-3.0\n * @copyright 2016-2018 Aeneas Rekkas\n * @author Aeneas Rekkas <aeneas+oss@aeneas.io>\n *\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport classNames from 'classnames';\nimport onElementResize from 'element-resize-event';\nimport * as React from 'react';\nvar defaultGetWidth = function (element) { return element.clientWidth; };\nvar defaultGetHeight = function (element) { return element.clientHeight; };\nvar Dimensions = function (_a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.getHeight, getHeight = _c === void 0 ? defaultGetHeight : _c, _d = _b.getWidth, getWidth = _d === void 0 ? defaultGetWidth : _d, _e = _b.className, className = _e === void 0 ? null : _e, _f = _b.elementResize, elementResize = _f === void 0 ? false : _f;\n    return function (ComposedComponent) {\n        var Decorator = /** @class */ (function (_super) {\n            __extends(Decorator, _super);\n            function Decorator(props) {\n                var _this = _super.call(this, props) || this;\n                _this.updateDimensions = function () {\n                    var container = _this.containerRef;\n                    if (!container) {\n                        return;\n                    }\n                    var containerWidth = getWidth(container);\n                    var containerHeight = getHeight(container);\n                    if (containerWidth !== _this.state.containerWidth ||\n                        containerHeight !== _this.state.containerHeight) {\n                        _this.setState({ containerWidth: containerWidth, containerHeight: containerHeight });\n                    }\n                };\n                _this.onResize = function () {\n                    if (_this.rqf) {\n                        return;\n                    }\n                    _this.rqf = _this.getWindow().requestAnimationFrame(function () {\n                        _this.rqf = null;\n                        _this.updateDimensions();\n                    });\n                };\n                _this.onContainerRef = function (ref) {\n                    _this.containerRef = ref;\n                    _this.updateDimensions();\n                };\n                _this.state = {};\n                return _this;\n            }\n            Decorator.prototype.componentDidMount = function () {\n                if (!this.containerRef) {\n                    throw new Error('Cannot find container div');\n                }\n                this.updateDimensions();\n                if (elementResize) {\n                    // Experimental: `element-resize-event` fires when an element resizes.\n                    // It attaches its own window resize listener and also uses\n                    // requestAnimationFrame, so we can just call `this.updateDimensions`.\n                    onElementResize(this.containerRef, this.updateDimensions);\n                }\n                else {\n                    this.getWindow().addEventListener('resize', this.onResize, false);\n                }\n            };\n            // This cann not be used here because it doesn't listen to state changes.\n            Decorator.prototype.componentWillUnmount = function () {\n                this.getWindow().removeEventListener('resize', this.onResize);\n            };\n            // If the component is mounted in a different window to the javascript\n            // context, as with https://github.com/JakeGinnivan/react-popout\n            // then the `window` global will be different from the `window` that\n            // contains the component.\n            // Depends on `defaultView` which is not supported <IE9\n            Decorator.prototype.getWindow = function () {\n                return this.containerRef\n                    ? this.containerRef.ownerDocument.defaultView || window\n                    : window;\n            };\n            Decorator.prototype.render = function () {\n                return (React.createElement(\"div\", { className: classNames(className, 'ory-dimensions'), ref: this.onContainerRef },\n                    React.createElement(ComposedComponent, __assign({}, this.state, this.props, { updateDimensions: this.updateDimensions }))));\n            };\n            return Decorator;\n        }(React.Component));\n        return function (props) { return React.createElement(Decorator, __assign({}, props)); };\n    };\n};\nexport default Dimensions;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}